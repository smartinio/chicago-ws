webpackJsonp([1],{"+xJD":function(t,e){},EsBq:function(t,e){},LH3B:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"BEFORE",function(){return L}),n.d(i,"TRADING",function(){return H}),n.d(i,"CHICAGO",function(){return U}),n.d(i,"PLAYING",function(){return $}),n.d(i,"AFTER",function(){return j});var s,a=n("/5sW"),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{visibility:"hidden",height:"0",width:"0"}},t._l(t.cards.suits,function(e){return n("div",t._l(t.cards.values,function(i){return n("img",{attrs:{src:t.getSrc(i,e)}})}))}))},staticRenderFns:[]},o=void 0,c={name:"app",components:{Preloader:n("VU/8")({methods:{getSrc:function(t,e){return this.getCardUrl({value:t,suit:e})}},data:function(){return{cards:{suits:{HEARTS:"HEARTS",SPADES:"SPADES",DIAMONDS:"DIAMONDS",CLUBS:"CLUBS"},values:{TWO:"TWO",THREE:"THREE",FOUR:"FOUR",FIVE:"FIVE",SIX:"SIX",SEVEN:"SEVEN",EIGHT:"EIGHT",NINE:"NINE",TEN:"TEN",JACK:"JACK",QUEEN:"QUEEN",KING:"KING",ACE:"ACE"}}}}},r,!1,null,null,null).exports},mounted:function(){o=setInterval(function(){fetch("https://chicago-server.herokuapp.com",{method:"HEAD"})},1e4)},unmounted:function(){clearInterval(o)}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view"),this._v(" "),e("Preloader")],1)},staticRenderFns:[]},d=n("VU/8")(c,l,!1,function(t){n("UUE2")},null,null).exports,u=n("bOdI"),m=n.n(u),h=n("NYxO"),p={state:{isMyTurn:!1,imDealing:!1,hand:[],id:"",name:"",score:0,hasTakenChicago:!1,winner:!1},mutations:(s={},m()(s,"SET_MY_HAND",function(t,e){t.hand=e}),m()(s,"SET_MY_TURN",function(t,e){t.isMyTurn=e}),m()(s,"SET_IM_DEALING",function(t,e){t.imDealing=e}),m()(s,"SET_MY_PLAYER",function(t,e){t.id=e.id,t.name=e.name,t.score=e.score,t.hasTakenChicago=e.hasTakenChicago,t.winner=e.winner}),s)},f="SET_CURRENTLY_IN_GAME",v="HANDLE_CURRENTLY_IN_GAME",g=n("/ocq"),y=n("BO1k"),_=n.n(y),C="SEND_ACTION",E=n("Zrlr"),k=n.n(E),S=function t(e,n){k()(this,t),this.nickname=e,this.key=n},T=function t(e,n){k()(this,t),this.playerId=e,this.key=n},A=n("mvHQ"),x=n.n(A),N=n("pFYg"),b=n.n(N),R=function t(e,n){k()(this,t),(void 0===n?"undefined":b()(n))!==b()("")&&(n=x()(n)),this.type=e,this.value=n},w={props:{connected:{type:Boolean,default:!1}},computed:{statusText:function(){return this.connected?"Connected":"Connecting"},statusClass:function(){return this.connected?"is-success is-light":"is-warning"},statusIcon:function(){return this.connected?"fa-check":"fa-spinner"},animationClass:function(){return this.connected?"":"is-spinning"}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("a",{staticClass:"button is-small is-rounded",class:this.statusClass},[e("span",{staticClass:"icon is-small",class:this.animationClass},[e("i",{staticClass:"fa",class:this.statusIcon})]),this._v(" "),e("span",[this._v(this._s(this.statusText))])])])},staticRenderFns:[]},I=n("VU/8")(w,O,!1,function(t){n("EsBq")},"data-v-be65522c",null).exports,M={name:"Start",components:{ConnectionStatus:I},props:{currentlyInGame:{type:Boolean,default:void 0},connected:{type:Boolean,required:!0},urlKey:{type:String,default:""},errors:{type:Object,required:!0}},data:function(){return{invKey:"",nickname:"",leftGame:!1}},methods:{rejoin:function(){this.$emit("rejoin")},leave:function(){this.$emit("leave"),this.leftGame=!0},rememberNickname:function(){this.nickname&&localStorage.setItem("nickname",this.nickname)},createGame:function(){if(this.hasNicknameSet){var t=new R("NEW_GAME",this.nickname);this.$emit("action",t),this.rememberNickname()}},joinGame:function(){if(this.fieldsAreValid){var t=new S(this.nickname,this.invKey),e=new R("JOIN_GAME",t);this.$emit("action",e),this.rememberNickname()}},checkGame:function(){var t=localStorage.getItem("invitationKey"),e=localStorage.getItem("playerId");if(t&&e){var n=new T(e,t),i=new R("CHECK_GAME",n);this.$store.dispatch(C,i)}else localStorage.removeItem("invitationKey"),localStorage.removeItem("playerId"),this.$store.commit("SET_CURRENTLY_IN_GAME",!1)},dangerIfExists:function(t){return this[t]?"is-danger":""},handleKeyupEnter:function(){this.invKey?this.joinGame():this.createGame()}},computed:{checkingGame:function(){return void 0===this.currentlyInGame},isAlreadyInAGame:function(){return!this.leftGame&&this.currentlyInGame},hasNicknameSet:function(){return this.nickname.length>0},hasKeySet:function(){var t=this.invKey.split("-");if(5===t.length){var e=!0,n=!1,i=void 0;try{for(var s,a=_()(t);!(e=(s=a.next()).done);e=!0){if(""===s.value)return!1}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}return!0}return!1},hasErrors:function(){return this.errors.invKey.length>0||this.errors.nickname.length>0},fieldsAreValid:function(){return!this.hasErrors&&this.hasNicknameSet&&this.hasKeySet}},created:function(){this.invKey=this.urlKey||"";var t=localStorage.getItem("nickname");t&&(this.nickname=t)},mounted:function(){this.$refs.nickname.focus()},watch:{connected:function(t){t&&this.checkGame()},urlKey:function(){this.invKey=this.urlKey||this.invKey||""},invKey:function(){this.$emit("changeKey")},nickname:function(){this.$emit("changeNick")}}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("ConnectionStatus",{attrs:{connected:t.connected&&!t.checkingGame}}),t._v(" "),t.isAlreadyInAGame?n("section",{staticClass:"hero is-warning",staticStyle:{"margin-top":"30px"}},[n("div",{staticClass:"hero-body"},[n("p",{staticClass:"title"},[t._v("\n              You're currently in a game\n            ")]),t._v(" "),n("p",{staticClass:"subtitle"},[t._v("\n              Do you want to rejoin?\n            ")]),t._v(" "),n("p",[n("a",{staticClass:"button is-black",on:{click:t.rejoin}},[t._v("Yes, rejoin")]),t._v(" "),n("a",{staticClass:"button is-warning is-light",on:{click:t.leave}},[t._v("No, leave game")])])])]):t._e(),t._v(" "),n("div",{staticClass:"field",staticStyle:{"padding-top":"30px"}},[n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],ref:"nickname",staticClass:"input is-large",class:t.dangerIfExists(t.errors.nickname),attrs:{disabled:t.isAlreadyInAGame||t.checkingGame,placeholder:"Choose a nickname..."},domProps:{value:t.nickname},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleKeyupEnter(e)},input:function(e){e.target.composing||(t.nickname=e.target.value)}}}),t._v(" "),t.errors.nickname?n("p",{staticClass:"help is-danger"},[t._v("\n              "+t._s(t.errors.nickname)+"\n            ")]):t._e()])]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-expanded"},[n("div",{staticClass:"field has-addons is-fullwidth"},[n("div",{staticClass:"control is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.invKey,expression:"invKey"}],staticClass:"input is-large",class:t.dangerIfExists(t.errors.invKey),attrs:{disabled:t.isAlreadyInAGame||t.checkingGame,type:"text",placeholder:"Invitation key"},domProps:{value:t.invKey},on:{input:function(e){e.target.composing||(t.invKey=e.target.value)}}}),t._v(" "),t.errors.invKey?n("p",{staticClass:"help is-danger"},[t._v("\n                      "+t._s(t.errors.invKey)+"\n                    ")]):t._e()]),t._v(" "),n("div",{staticClass:"control"},[n("a",{staticClass:"button is-info is-large",attrs:{disabled:!t.fieldsAreValid||t.isAlreadyInAGame||t.checkingGame},on:{click:t.joinGame}},[t._v("\n                    Join existing game\n                  ")])])])]),t._v(" "),n("div",{staticClass:"column is-narrow"},[n("button",{staticClass:"button is-primary is-large",attrs:{disabled:!t.hasNicknameSet||t.isAlreadyInAGame||t.checkingGame},on:{click:t.createGame}},[t._v("\n                Create new game\n              ")])])])],1)])},staticRenderFns:[]},G=n("VU/8")(M,P,!1,function(t){n("+xJD")},null,null).exports,D=n("Gu7T"),K=n.n(D),L="BEFORE",H="TRADING",U="CHICAGO",$="PLAYING",j="AFTER",F=n("Xxa5"),Y=n.n(F),V=n("exGp"),W=n.n(V),B={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.player.hasTakenChicago?e("span",{staticClass:"tag is-light",staticStyle:{"margin-left":"10px"}},[this._v("\n    ðŸš€\n  ")]):this._e(),this._v(" "),!this.isMe&&this.isCurrentPlayer(this.player)?e("span",{staticClass:"tag is-info",staticStyle:{"margin-left":"10px"}},[this._v("\n    PLAYING\n  ")]):this._e(),this._v(" "),this.isDealer(this.player)?e("span",{staticClass:"tag is-dark",staticStyle:{"margin-left":"10px"}},[this._v("\n    DEALER\n  ")]):this._e(),this._v(" "),this.player.winner?e("span",{staticClass:"tag is-success",staticStyle:{"margin-left":"10px"}},[this._v("\n    WINNER\n  ")]):this._e()])},staticRenderFns:[]},J=n("VU/8")({name:"PlayerStatus",props:["player","currentPlayer","dealer","isMe"],methods:{isCurrentPlayer:function(t){return this.currentPlayer&&this.currentPlayer.id===t.id},isDealer:function(t){return this.dealer&&this.dealer.id===t.id}}},B,!1,null,null,null).exports,q=this,Q=new Audio("static/audio/yourturn.ogg"),z={props:["game","me","dealer","controlPlayer","markedCards","currentPlayer","baseMove"],name:"Controls",components:{PlayerStatus:J},data:function(){return{copiedKey:!1,inviteText:"Invite friends",phase:i,active:!0}},watch:{"me.isMyTurn":function(t){t&&!q.active&&Q.play()}},created:function(){var t=this;window.onblur=function(){t.active=!1},window.onfocus=function(){t.active=!0}},methods:{startGame:function(){this.doAction(new R("START_GAME"))},deal:function(){this.doAction(new R("DEAL_CARDS"))},restartGame:function(){this.doAction(new R("RESTART_GAME"))},doAction:function(t){this.$store.dispatch(C,t),this.$emit("action")},isPhase:function(t){return this.game.round.phase===t},copyLink:function(){var t=this;return W()(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.tmpKey=t.game.invKey,e.next=3,navigator.clipboard.writeText(window.location.href);case 3:t.copiedKey=!0,t.inviteText="Link copied to clipboard!";case 5:case"end":return e.stop()}},e,t)}))()}},computed:{canTradeOpenly:function(){return 1==this.markedCards.length},canRespondToOpenCard:function(){return this.game.oneOpen.isOpen},checkOrKey:function(){return this.copiedKey?"fa fa-check":"fa fa-key"},canStart:function(){return this.me.id===this.game.host.id&&this.game.players.length>1&&!this.game.started},canRestart:function(){return this.me.id===this.game.host.id&&this.game.hasWinners},markedCard:function(){return 1===this.markedCards.length&&this.markedCards[0]}}},X={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"is-flex is-flex-direction-row is-justify-content-flex-end",staticStyle:{gap:"10px"}},[t.game.started?t._e():n("span",{staticClass:"tag is-medium is-primary",staticStyle:{cursor:"pointer"},on:{click:t.copyLink,mouseleave:function(e){t.inviteText="Invite friends",t.copiedKey=!1}}},[n("span",{staticClass:"icon"},[n("i",{class:t.checkOrKey})]),t._v(" "),n("span",[t._v(t._s(t.inviteText))])]),t._v(" "),t.canStart&&!t.canRestart?n("a",{staticClass:"tag is-medium",on:{click:t.startGame}},[t._v("Start game")]):t._e(),t._v(" "),t.canRestart?n("a",{staticClass:"tag is-medium is-warning",on:{click:t.restartGame}},[t._m(0),t._v(" "),n("span",[t._v("Restart")])]):t._e(),t._v(" "),t.me.imDealing&&t.isPhase(t.phase.AFTER)?n("span",[n("a",{staticClass:"tag is-danger is-medium deal-pulse",on:{click:t.deal}},[t._v("DEAL CARDS")])]):t.me.isMyTurn?n("span",[n("span",{staticClass:"tag is-info is-medium"},[t._v("YOUR TURN")])]):n("span",[n("span",{staticClass:"tag is-warning is-medium"},[t._v("WAITING")])])]),t._v(" "),n("div",{staticClass:"is-flex is-justify-content-flex-end",staticStyle:{"margin-top":"10px"}},[n("PlayerStatus",{attrs:{isMe:!0,player:t.controlPlayer,dealer:t.dealer,currentPlayer:t.currentPlayer}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small"},[e("i",{staticClass:"fa fa-refresh"})])}]},Z=n("VU/8")(z,X,!1,function(t){n("op6j")},"data-v-66676894",null).exports,tt={name:"Player",props:["player","baseMove","currentPlayer","dealer","fallbackName","variant","isMe"],components:{PlayerStatus:J},computed:{imHost:function(){return this.$store.state.me.id===this.$store.state.game.host.id},figureClass:function(){var t="large"===this.variant?96:48;return"is-"+t+"x"+t}},methods:{kickPlayer:function(t){var e=new R("KICK_PLAYER",t.id);this.$store.dispatch(C,e)},isBaseCard:function(t){return!!this.baseMove&&(t.suit===this.baseMove.card.suit&&t.value===this.baseMove.card.value)}}},et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"media",style:t.player.connected?"":"opacity: 0.2"},[n("div",{staticClass:"media-left"},[n("figure",{staticClass:"image",class:t.figureClass},[n("img",{staticClass:"avatar",attrs:{src:t.getAvatarUrl(t.player),alt:"Placeholder image"}})])]),t._v(" "),n("div",{staticClass:"media-content",staticStyle:{overflow:"hidden"}},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("p",{staticClass:"title is-4"},[t._v("\n          "+t._s(t.player.name||t.fallbackName)+"\n        ")]),t._v(" "),n("p",{staticClass:"subtitle is-6",staticStyle:{"margin-bottom":"5px"}},[t._v("\n          "+t._s(t.player.score)+" points\n        ")]),t._v(" "),!t.isMe&&t.imHost?n("button",{staticClass:"button is-rounded is-small is-danger",on:{click:function(e){t.kickPlayer(t.player)}}},[t._m(0)]):t._e()]),t._v(" "),n("div",{staticClass:"column is-expanded"},[t.player.hand?n("div",{staticStyle:{"padding-right":"40px"}},t._l(t.player.hand.played,function(e){return n("figure",{staticClass:"image is-inline-flex",staticStyle:{width:"66px",height:"96px","margin-right":"-40px"}},[n("img",{class:t.isBaseCard(e)?"red-pulse":"",attrs:{src:t.getCardUrl(e),alt:e.type+""+e.value}})])})):t._e()]),t._v(" "),t.isMe?t._e():n("div",{staticClass:"column is-narrow"},[n("PlayerStatus",{attrs:{currentPlayer:t.currentPlayer,dealer:t.dealer,player:t.player}})],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small"},[e("i",{staticClass:"fa fa-user-slash"})])}]},nt=n("VU/8")(tt,et,!1,null,null,null).exports,it={name:"Players",props:["players","baseMove","currentPlayer","dealer"],components:{Player:nt}},st={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-flex is-flex-direction-column",staticStyle:{width:"100%"}},t._l(t.players,function(e,i){return n("div",{staticStyle:{"padding-top":"15px"}},[n("Player",{attrs:{isMe:!1,variant:"large",fallbackName:"Player "+i+1,player:e,currentPlayer:t.currentPlayer,baseMove:t.baseMove,dealer:t.dealer}})],1)}))},staticRenderFns:[]},at=n("VU/8")(it,st,!1,function(t){n("mm1o")},"data-v-0467980e",null).exports,rt={props:["me","game","phase","markedCards"],name:"MyHand",computed:{canTradeOpenly:function(){return 1==this.markedCards.length},canRespondToOpenCard:function(){return this.game.oneOpen.isOpen}},methods:{toggleMark:function(t){this.canRespondToOpenCard||this.$emit("toggleMark",t)},isMarked:function(t){return this.markedCards.some(function(t){return function(e){return t.suit===e.suit&&t.value===e.value}}(t))},getCardClass:function(t){return this.isMarked(t)?"markedCard":""},getCardButtonClass:function(t){return this.isMarked(t)?"markedCard":"invis"},getTradeButtonClass:function(){return this.markedCards.length?"markedCard":"invis"},doAction:function(t){this.$store.dispatch(C,t),this.$emit("action")},play:function(t){this.me.isMyTurn&&this.doAction(new R("MOVE",t))},trade:function(){this.me.isMyTurn&&this.doAction(new R("THROW",this.markedCards))},tradeOpenly:function(){this.me.isMyTurn&&1===this.markedCards.length&&this.doAction(new R("THROW_ONE_OPEN",this.markedCards[0]))},respondToOneOpen:function(t){this.doAction(new R("RESPOND_ONE_OPEN",t))},respondToChicago:function(t){this.doAction(new R("CHICAGO",t))}}},ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-flex is-flex-direction-column is-justify-content-flex-end is-align-items-center",staticStyle:{transform:"translateY(100px)"}},["CHICAGO"===t.phase&&t.me.isMyTurn?n("div",{staticClass:"is-flex is-flex-direction-column is-align-items-center"},[n("span",{staticClass:"control-text",staticStyle:{"margin-bottom":"15px","margin-right":"0px"}},[t._v("\n      Want Chicago?\n    ")]),t._v(" "),n("div",{staticClass:"is-flex"},[n("a",{staticClass:"control-button button is-success is-small is-rounded",attrs:{disabled:!t.me.isMyTurn},on:{click:function(e){t.respondToChicago(!0)}}},[t._v("\n        YES\n      ")]),t._v(" "),n("div",{staticStyle:{width:"10px"}}),t._v(" "),n("a",{staticClass:"control-button button is-danger is-small is-rounded",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!t.me.isMyTurn},on:{click:function(e){t.respondToChicago(!1)}}},[t._v("\n        NO\n      ")])])]):t._e(),t._v(" "),"TRADING"===t.phase&&t.canRespondToOpenCard?n("div",{staticClass:"is-flex is-flex-direction-column is-align-items-center"},[n("div",{staticClass:"control-text",staticStyle:{"margin-bottom":"15px","margin-right":"0px",overflow:"visible"}},[n("img",{staticClass:"open-card",staticStyle:{maxWidth:"64px"},attrs:{src:t.getCardUrl(t.game.oneOpen.card)}})]),t._v(" "),n("div",{staticClass:"is-flex"},[n("a",{staticClass:"control-button button is-success is-small is-rounded",attrs:{disabled:!t.me.isMyTurn},on:{click:function(e){t.respondToOneOpen(!0)}}},[t._v("\n        ACCEPT\n      ")]),t._v(" "),n("div",{staticStyle:{width:"10px"}}),t._v(" "),n("a",{staticClass:"control-button button is-danger is-small is-rounded",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!t.me.isMyTurn},on:{click:function(e){t.respondToOneOpen(!1)}}},[t._v("\n        DECLINE\n      ")])])]):"TRADING"===t.phase&&t.canTradeOpenly?n("div",[n("a",{staticClass:"control-button button is-success is-small is-rounded",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!t.me.isMyTurn},on:{click:t.trade}},[t._v("\n      TRADE (1)\n    ")]),t._v(" "),n("a",{staticClass:"control-button button is-info is-small is-rounded",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!t.me.isMyTurn},on:{click:t.tradeOpenly}},[t._v("\n      OPEN (1)\n    ")])]):"TRADING"===t.phase&&t.markedCards.length?n("div",[n("a",{staticClass:"control-button button is-small is-rounded is-success",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!t.me.isMyTurn},on:{click:t.trade}},[t._v("\n      TRADE ("+t._s(t.markedCards.length)+")\n    ")])]):"TRADING"===t.phase?n("div",[n("a",{staticClass:"control-button button is-small is-rounded is-info",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!t.me.isMyTurn},on:{click:t.trade}},[t._v("\n      PASS\n    ")])]):t._e(),t._v(" "),n("div",{staticClass:"is-flex",style:t.me.isMyTurn?"opacity: 1":"opacity: 0.4"},t._l(t.me.hand,function(e){return n("div",{staticClass:"is-flex is-flex-direction-column is-align-items-center"},["PLAYING"===t.phase?n("a",{staticClass:"button is-small is-rounded is-success control-button",class:t.getCardButtonClass(e),staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!t.me.isMyTurn},on:{click:function(n){t.play(e)}}},[t._v("\n        PLAY\n      ")]):t._e(),t._v(" "),n("img",{staticClass:"playingCard",class:t.getCardClass(e),attrs:{src:t.getCardUrl(e)},on:{click:function(n){t.toggleMark(e)}}})])}))])},staticRenderFns:[]},ct=n("VU/8")(rt,ot,!1,function(t){n("LH3B")},"data-v-f8fa0568",null).exports,lt={name:"ChatSender",data:function(){return{message:""}},methods:{sendChatMessage:function(){this.message&&(this.doAction(new R("SEND_CHAT_MESSAGE",this.message)),this.message="")},doAction:function(t){this.$store.dispatch(C,t)}}},dt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field has-addons",staticStyle:{width:"100%"}},[n("p",{staticClass:"control has-icons-left has-icons-right",staticStyle:{width:"100%"}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.message,expression:"message",modifiers:{trim:!0}}],staticClass:"input is-rounded",attrs:{placeholder:"Message",type:"text"},domProps:{value:t.message},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.sendChatMessage(e)},input:function(e){e.target.composing||(t.message=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"control"},[n("a",{staticClass:"button is-info is-rounded",attrs:{disabled:!t.message},on:{click:t.sendChatMessage}},[t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fas fa-comment"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small",staticStyle:{display:"inline-block","margin-left":"-15px"}},[e("i",{staticClass:"fas fa-paper-plane"})])}]},ut=n("VU/8")(lt,dt,!1,null,null,null).exports,mt=n("7nRM"),ht=n.n(mt),pt=n("mwJQ"),ft={CLUBS:"â™£ï¸",HEARTS:"â¤ï¸",DIAMONDS:"â™¦ï¸",SPADES:"â™ ï¸"},vt=function(t){var e=t.split(""),n=ht()(e),i=n[0],s=n.slice(1);return i.toUpperCase()+s.join("").toLowerCase()},gt=new(n.n(pt).a);gt.replace_mode="img",gt.img_set="apple",gt.img_sets.apple.path="https://raw.githubusercontent.com/iamcal/emoji-data/master/img-apple-64/";var yt=function(t){return t?gt.replace_unified(t):void 0},_t={methods:{getCardUrl:function(t){return"static/cards/"+t.value+"_"+t.suit+".svg"},getAvatarUrl:function(t){return"https://avatars.dicebear.com/api/adventurer-neutral/"+t.id+".svg"},niceCard:function(t){var e=vt(t.value);return ft[t.suit]+" "+e},capitalize:vt,withEmojis:function(t){return function(){return yt(t.apply(void 0,arguments))}},emojify:yt}},Ct=n("8wyc"),Et=_t.methods,kt=Et.withEmojis,St=Et.capitalize,Tt=Et.niceCard,At=function(t){var e=1===t.points?"point":"points";return t.points+" "+e},xt={props:["game"],name:"EventLog",computed:{events:function(){return this.game.events}},methods:{format:Ct.a,preload:kt(function(){return"âœ¨ðŸ’¬ðŸ‘ï¸ðŸ’°ðŸ‘€ðŸ¤”ðŸ”ðŸš€ðŸ’ªðŸ¥²ðŸ¥³ðŸ™ŒðŸ‘‘ðŸ‘‹ðŸ’¦ðŸƒðŸ‘žðŸ‘¨â€âœˆï¸ðŸŒ»â™£ï¸â¤ï¸â™¦ï¸â™ ï¸"}),formatServerEvent:kt(function(t){switch(t.action){case"NEW_ROUND":return"âœ¨ A new round begins âœ¨";case"TRICK_DONE":return"ðŸ‘€"}}),formatPlayerEvent:kt(function(t){switch(t.action){case"CHAT_MESSAGE":var e=function(t){var e=document.createElement("pre"),n=document.createTextNode(t);return e.appendChild(n),e.innerHTML?e.innerHTML.trim():void 0}(t.message);return e?"ðŸ’¬ "+e:void 0;case"TRADED":var n=1===t.numCards?"card":"cards",i=0===t.numCards?"ðŸ¤”":"ðŸ”";return"traded "+t.numCards+" "+n+" "+i;case"PLAYED":return"played "+Tt(t.card);case"WON_TRICK":return"took the trick!";case"CALLED_CHICAGO":return"called Chicago! ðŸš€";case"LOST_CHICAGO":return"lost 15 points for failing their Chicago... ðŸ¥²";case"WON_CHICAGO":return"got 15 points for their Chicago! ðŸ¥³";case"WON_ROUND":var s=5===t.points?"closing with a Two!":"winning!";return"got "+At(t)+" for "+s+" ðŸ™Œ";case"WON_BEST_HAND":var a=St(t.handType.replaceAll("_"," "));return"got "+At(t)+" for a "+a+" ðŸ’°";case"WON_GAME":return"won the game! ðŸ‘‘ ðŸ‘‘ ðŸ‘‘";case"WON_ROUND_GUARANTEED":var r=t.cards.map(Tt).join(", ");return 1===t.cards.length?"won the round with an unbeatable "+r+"! ðŸ’ª":"made it rain ðŸ’¦ with "+r;case"CREATED_GAME":return"created the game ðŸŒ»";case"BECAME_HOST":return"became the new game host ðŸ‘¨â€âœˆï¸";case"JOINED_GAME":return"joined the game ðŸ‘‹";case"LEFT_GAME":return t.kicked?"was kicked from the game ðŸ‘ž":"left the game ðŸƒ";case"REQUESTED_ONE_OPEN":return"is being offered "+Tt(t.card);case"RESPONDED_TO_ONE_OPEN":return t.accepted?"accepted ðŸ‘":"declined ðŸ‘Ž"}})}},Nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{always:!1,smooth:!0},expression:"{ always: false, smooth: true }"}],staticClass:"disable-scrollbars is-flex is-justify-content-flex-start is-flex-direction-column",staticStyle:{overflow:"scroll",width:"400px"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],domProps:{innerHTML:t._s(t.preload())}}),t._v(" "),t._l(t.events,function(e){return n("div",["server"===e.actor.id&&t.formatServerEvent(e)?n("div",{staticStyle:{"border-bottom":"1px solid #ccc",height:"15px","text-align":"center","margin-bottom":"15px"}},[n("span",{staticClass:"has-text-grey is-size-7",staticStyle:{height:"40px","background-color":"#f5f5f5",padding:"5px"},domProps:{innerHTML:t._s(t.formatServerEvent(e))}})]):t.formatPlayerEvent(e)?n("div",[n("span",{staticClass:"has-text-grey-light is-size-7",staticStyle:{"line-height":"30px"}},[t._v("\n        "+t._s(t.format(e.timestamp,"HH:mm"))+"\n      ")]),t._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{width:"30px"}}),t._v(" "),n("strong",[t._v(t._s(e.actor.name))]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.formatPlayerEvent(e))}})]):t._e(),t._v(" "),n("span",{ref:"rows",refInFor:!0})])})],2)},staticRenderFns:[]},bt={name:"Chat",props:["game","connected"],components:{ChatSender:ut,EventLog:n("VU/8")(xt,Nt,!1,function(t){n("gLQi")},"data-v-0746c582",null).exports,ConnectionStatus:I}},Rt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-flex is-flex-direction-column is-justify-content-space-between",staticStyle:{"background-color":"#f5f5f5","border-radius":"20px",padding:"15px"}},[n("div",{staticClass:"is-flex is-flex-direction-column",staticStyle:{flex:"1",overflow:"hidden"}},[n("div",{staticClass:"is-flex is-justify-content-space-between"},[n("ConnectionStatus",{attrs:{connected:t.connected}}),t._v(" "),n("a",{staticClass:"button is-small is-rounded is-danger is-light",on:{click:function(e){t.$emit("leave")}}},[t._m(0),t._v(" "),n("span",[t._v("Leave game")])])],1),t._v(" "),n("div",{staticStyle:{height:"15px"}}),t._v(" "),n("EventLog",{attrs:{game:t.game}})],1),t._v(" "),n("div",{staticStyle:{"padding-top":"15px"}},[n("ChatSender")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small"},[e("i",{staticClass:"fa fa-right-from-bracket"})])}]},wt=n("VU/8")(bt,Rt,!1,null,null,null).exports,Ot=function(t){return function(e){return t.suit===e.suit&&t.value===e.value}},It={name:"Game",props:{connected:{type:Boolean,required:!0},game:{type:Object,required:!0},me:{type:Object,required:!0}},watch:{connected:function(t){t&&this.game.stale&&this.$emit("rejoin")}},components:{Controls:Z,Players:at,MyHand:ct,Chat:wt,Player:nt},data:function(){return{markedCards:[]}},methods:{leave:function(){this.$emit("leave"),setTimeout(function(){window.location.href="/"},0)},toggleMark:function(t){this.isPhase(U)?this.unmarkAll():this.isPhase($)?this.markSingle(t):this.isMarked(t)?this.unmark(t):this.mark(t)},unmark:function(t){this.markedCards=this.markedCards.filter(function(t){return function(e){return!Ot(t)(e)}}(t))},unmarkAll:function(){this.markedCards=[]},mark:function(t){this.isMarked(t)||this.markedCards.push(t)},markSingle:function(t){this.markedCards=[t]},isMarked:function(t){return this.markedCards.some(Ot(t))},isPhase:function(t){return this.game.round.phase===t}},computed:{baseMove:function(){if(this.currentTrick)return this.currentTrick.moves&&this.currentTrick.moves.length>0&&this.currentTrick.moves[0]},currentTrick:function(){var t=this.game.round,e=t&&t.tricks;if(e)return e.length>0&&e[e.length-1]},currentPlayer:function(){return this.game.round&&this.game.round.currentPlayer},dealer:function(){return this.game.dealer},controlPlayer:function(){var t=this;return this.game.players.find(function(e){return e.id===t.me.id})},otherPlayers:function(){for(var t=this,e=[].concat(K()(this.game.players)),n=e.findIndex(function(e){return e.id===t.me.id}),i=0;i<n;i++)e.push(e.shift());return e.slice(1)}}},Mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"section pb-0 pt-0 is-flex is-flex-direction-column"},[e("div",{staticClass:"is-flex is-flex-direction-row",staticStyle:{flex:"1"}},[e("div",{staticClass:"is-flex is-flex-direction-column is-justify-content-space-between",staticStyle:{height:"100vh"}},[e("div",{staticClass:"is-flex",staticStyle:{flex:"1",overflow:"hidden","padding-top":"30px","padding-bottom":"30px"}},[e("Chat",{attrs:{game:this.game,connected:this.connected},on:{leave:this.leave}})],1)]),this._v(" "),e("div",{staticStyle:{width:"30px"}}),this._v(" "),e("div",{staticClass:"container is-flex is-flex-direction-column"},[e("div",{staticStyle:{"padding-top":"30px"}},[e("div",{staticClass:"is-flex is-flex-direction-row is-justify-content-space-between"},[e("Player",{attrs:{isMe:!0,variant:"large",fallbackName:"You",player:this.controlPlayer,baseMove:this.baseMove,currentPlayer:this.currentPlayer,dealer:this.dealer}}),this._v(" "),e("Controls",{attrs:{game:this.game,me:this.me,controlPlayer:this.controlPlayer,currentPlayer:this.currentPlayer,dealer:this.dealer,baseMove:this.baseMove,markedCards:this.markedCards},on:{action:this.unmarkAll}})],1),this._v(" "),this.otherPlayers?e("Players",{attrs:{players:this.otherPlayers,baseMove:this.baseMove,currentPlayer:this.currentPlayer,dealer:this.dealer}}):this._e()],1),this._v(" "),e("div",{staticClass:"is-flex is-justify-content-flex-end",staticStyle:{flex:"1"}},[this.game.started?e("MyHand",{attrs:{me:this.me,markedCards:this.markedCards,phase:this.game.round.phase,game:this.game},on:{toggleMark:this.toggleMark,action:this.unmarkAll}}):this._e()],1)])])])},staticRenderFns:[]},Pt=function t(e,n){k()(this,t),this.playerId=e,this.key=n},Gt="SET_NICKNAME_ERROR",Dt="SET_INVKEY_ERROR",Kt={components:{Start:G,Game:n("VU/8")(It,Mt,!1,function(t){n("U49S")},null,null).exports,ConnectionStatus:I},name:"Wrapper",computed:Object(h.b)({game:"game",me:"me",errors:"errors",socket:"socket"}),watch:{"socket.status":function(t){var e=this;"failed"===t&&setTimeout(function(){return e.connect()},1e3)}},methods:{dispatchAction:function(t){this.$store.dispatch(C,t)},clearKeyError:function(){this.$store.commit(Dt,"")},clearNickError:function(){this.$store.commit(Gt,"")},connect:function(){this.socket.connected||this.$store.dispatch("CONNECT")},rejoin:function(){var t=this.game.invKey||localStorage.getItem("invitationKey"),e=this.me.id||localStorage.getItem("playerId");if(!t||!e)return alert("Sorry! Something went wrong... You won't be able to rejoin the game"),void this.leave();var n=new T(e,t),i=new R("RECONNECT",n);this.dispatchAction(i)},leave:function(){var t=this.game.invKey||localStorage.getItem("invitationKey"),e=this.me.id||localStorage.getItem("playerId");if(t&&e){var n=new Pt(e,t),i=new R("LEAVE_GAME",n);this.dispatchAction(i)}localStorage.removeItem("invitationKey"),localStorage.removeItem("playerId")}},created:function(){this.connect()}},Lt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.game.invKey?e("Game",{attrs:{connected:this.socket.connected,me:this.me,game:this.game},on:{rejoin:this.rejoin,leave:this.leave}}):e("Start",{attrs:{connected:this.socket.connected,errors:this.errors,urlKey:this.$route.params.key,currentlyInGame:this.game.currentlyInGame},on:{action:this.dispatchAction,changeKey:this.clearKeyError,changeNick:this.clearNickError,rejoin:this.rejoin,leave:this.leave}})],1)},staticRenderFns:[]},Ht=n("VU/8")(Kt,Lt,!1,function(t){n("VT0U")},"data-v-a10568c8",null).exports;a.a.use(g.a);var Ut,$t,jt,Ft,Yt,Vt,Wt,Bt=[{path:"/:key",component:Ht},{path:"/",component:Ht}],Jt=new g.a({base:"/",routes:Bt,mode:"hash"}),qt={state:{currentlyInGame:void 0,stale:!1,oneOpen:{player:{id:""},isOpen:!1,card:{suit:"",value:""}},host:{id:""},dealer:{id:""},invKey:"",players:[],events:[],started:!1,hasWinners:!1,round:{currentPlayer:"",phase:"",tricks:[],isFinalTrade:!1}},mutations:(Ut={},m()(Ut,f,function(t,e){t.currentlyInGame=e}),m()(Ut,"SET_STALE",function(t,e){t.stale=e}),m()(Ut,"MIRROR_GAME_STATE",function(t,e){t.currentlyInGame=!0,t.stale=!1,t.host.id=e.host.id,t.dealer=e.dealer,t.invKey=e.invitationKey,t.players=e.players,t.events=e.events,t.started=e.started,t.hasWinners=e.hasWinners,e.currentRound&&(t.round.currentPlayer=e.currentRound.currentPlayer,t.round.phase=e.currentRound.phase,t.round.tricks=e.currentRound.tricks,t.round.isFinalTrade=e.currentRound.isFinalTrade,t.oneOpen.player=e.oneOpen.player,t.oneOpen.card=e.oneOpen.card,t.oneOpen.isOpen=e.oneOpen.isOpen)}),Ut),actions:($t={},m()($t,v,function(t,e){(0,t.commit)(f,JSON.parse(e))}),m()($t,"DISCONNECTED",function(t){(0,t.commit)("SET_STALE",!0)}),m()($t,"HANDLE_SNAPSHOT",function(t,e){var n=t.commit,i=JSON.parse(e);localStorage.setItem("invitationKey",i.game.invitationKey),localStorage.setItem("playerId",i.me.id),Jt.push(i.game.invitationKey),n("SET_MY_TURN",i.myTurn),n("SET_IM_DEALING",i.imDealing),n("SET_MY_HAND",i.myHand),n("SET_MY_PLAYER",i.me),n("MIRROR_GAME_STATE",i.game)}),$t)},Qt={state:{nickname:"",invKey:""},mutations:(jt={},m()(jt,Gt,function(t,e){t.nickname=e}),m()(jt,Dt,function(t,e){t.invKey=e}),jt),actions:(Ft={},m()(Ft,"HANDLE_GAME_ERROR",function(t,e){t.state;window.alert(e)}),m()(Ft,"HANDLE_JSON_ERROR",function(t,e){t.state;window.alert("Something went wrong! Please try again")}),m()(Ft,"HANDLE_FATAL_ERROR",function(t,e){t.state;window.alert(e),localStorage.removeItem("invitationKey"),localStorage.removeItem("playerId"),window.location.href="/"}),Ft)},zt="SET_STATUS_CONNECTED",Xt="SET_STATUS_CONNECTING",Zt=function t(e){k()(this,t);var n=JSON.parse(e.data),i=n.type,s=n.body;this.type=i,this.body=s},te={connected:!1,status:"connecting",socket:void 0},ee=(Yt={},m()(Yt,zt,function(t){t.status="connected",t.connected=!0}),m()(Yt,"SET_STATUS_FAILED",function(t){t.status="failed",t.connected=!1}),m()(Yt,Xt,function(t){t.status="connecting",t.connected=!1}),m()(Yt,"SET_SOCKET",function(t,e){t.socket=e}),Yt),ne=(Vt={},m()(Vt,"CONNECT",function(t){var e=t.commit,n=t.dispatch;te.socket&&te.socket.close(),e(Xt);var i=new WebSocket("wss://chicago-server.herokuapp.com/game"),s=void 0;i.onopen=function(){var t=x()(new R("PING","pong"));s=setInterval(function(){return i.send(t)},1e4),e(zt)};var a=function(){clearInterval(s),e("SET_STATUS_FAILED"),n("DISCONNECTED")};i.onclose=a,i.onerror=a,i.onmessage=function(t){n("HANDLE_MESSAGE",t)},e("SET_SOCKET",i)}),m()(Vt,"HANDLE_MESSAGE",function(t,e){var n=t.commit,i=t.dispatch,s=new Zt(e);switch(s.type){case"CURRENTLY_IN_GAME":i(v,s.body);break;case"KICKED":localStorage.removeItem("invitationKey"),localStorage.removeItem("playerId"),alert("You were kicked from the game"),window.location.href="/";break;case"KEY_ERROR":n(Dt,s.body);break;case"NICKNAME_ERROR":n(Gt,s.body);break;case"GAME_ERROR":i("HANDLE_GAME_ERROR",s.body);break;case"JSON_ERROR":i("HANDLE_JSON_ERROR",s.body);break;case"FATAL_ERROR":i("HANDLE_FATAL_ERROR",s.body);break;case"SNAPSHOT":i("HANDLE_SNAPSHOT",s.body)}}),m()(Vt,C,function(t,e){t.state.socket.send(x()(e))}),Vt),ie={state:te,actions:ne,mutations:ee};a.a.use(h.a);var se=new h.a.Store({modules:(Wt={},m()(Wt,"me",p),m()(Wt,"game",qt),m()(Wt,"errors",Qt),m()(Wt,"socket",ie),Wt)}),ae=n("bNL2"),re=n.n(ae);a.a.use(re.a),a.a.config.productionTip=!1,a.a.mixin(_t),new a.a({store:se,router:Jt,el:"#app",render:function(t){return t(d)}}).$mount("#app")},U49S:function(t,e){},UUE2:function(t,e){},VT0U:function(t,e){},gLQi:function(t,e){},mm1o:function(t,e){},op6j:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ee37286feb7ac79efa46.js.map