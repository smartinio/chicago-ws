webpackJsonp([1],{"7I6i":function(e,t){},A2Hp:function(e,t){},"BI6/":function(e,t){},Bkyh:function(e,t){},IpWz:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={};n.d(s,"BEFORE",function(){return P}),n.d(s,"TRADING",function(){return M}),n.d(s,"CHICAGO",function(){return w}),n.d(s,"PLAYING",function(){return x}),n.d(s,"AFTER",function(){return O});var a,i=n("/5sW"),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{visibility:"hidden",height:"0",width:"0"}},e._l(e.cards.suits,function(t){return n("div",e._l(e.cards.values,function(s){return n("img",{attrs:{src:e.getSrc(s,t)}})}))}))},staticRenderFns:[]},c=void 0,o={name:"app",components:{Preloader:n("VU/8")({methods:{getSrc:function(e,t){return this.getCardUrl({value:e,suit:t})}},data:function(){return{cards:{suits:{HEARTS:"HEARTS",SPADES:"SPADES",DIAMONDS:"DIAMONDS",CLUBS:"CLUBS"},values:{TWO:"TWO",THREE:"THREE",FOUR:"FOUR",FIVE:"FIVE",SIX:"SIX",SEVEN:"SEVEN",EIGHT:"EIGHT",NINE:"NINE",TEN:"TEN",JACK:"JACK",QUEEN:"QUEEN",KING:"KING",ACE:"ACE"}}}}},r,!1,null,null,null).exports},mounted:function(){c=setInterval(function(){fetch("https://chicago-server.herokuapp.com",{method:"HEAD"})},1e4)},unmounted:function(){clearInterval(c)}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view"),this._v(" "),t("Preloader")],1)},staticRenderFns:[]},u=n("VU/8")(o,l,!1,function(e){n("WbD8")},null,null).exports,d=n("bOdI"),m=n.n(d),h=n("NYxO"),v={state:{isMyTurn:!1,imDealing:!1,hand:[],id:"",name:"",score:0,hasTakenChicago:!1,winner:!1},mutations:(a={},m()(a,"SET_MY_HAND",function(e,t){e.hand=t}),m()(a,"SET_MY_TURN",function(e,t){e.isMyTurn=t}),m()(a,"SET_IM_DEALING",function(e,t){e.imDealing=t}),m()(a,"SET_MY_PLAYER",function(e,t){e.id=t.id,e.name=t.name,e.score=t.score,e.hasTakenChicago=t.hasTakenChicago,e.winner=t.winner}),a)},p=n("/ocq"),f=n("BO1k"),g=n.n(f),_=n("Zrlr"),C=n.n(_),y=function e(t,n){C()(this,e),this.nickname=t,this.key=n},E=n("mvHQ"),k=n.n(E),A=n("pFYg"),S=n.n(A),N=function e(t,n){C()(this,e),(void 0===n?"undefined":S()(n))!==S()("")&&(n=k()(n)),this.type=t,this.value=n},T={name:"Start",props:{urlKey:{type:String,default:""},errors:{type:Object,required:!0}},data:function(){return{invKey:"",nickname:""}},methods:{rememberNickname:function(){this.nickname&&localStorage.setItem("nickname",this.nickname)},createGame:function(){if(this.hasNicknameSet){var e=new N("NEW_GAME",this.nickname);this.$emit("action",e),this.rememberNickname()}},joinGame:function(){if(this.fieldsAreValid){var e=new y(this.nickname,this.invKey),t=new N("JOIN_GAME",e);this.$emit("action",t),this.rememberNickname()}},dangerIfExists:function(e){return this[e]?"is-danger":""},handleKeyupEnter:function(){this.invKey?this.joinGame():this.createGame()}},computed:{hasNicknameSet:function(){return this.nickname.length>0},hasKeySet:function(){var e=this.invKey.split("-");if(5===e.length){var t=!0,n=!1,s=void 0;try{for(var a,i=g()(e);!(t=(a=i.next()).done);t=!0){if(""===a.value)return!1}}catch(e){n=!0,s=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw s}}return!0}return!1},hasErrors:function(){return this.errors.invKey.length>0||this.errors.nickname.length>0},fieldsAreValid:function(){return!this.hasErrors&&this.hasNicknameSet&&this.hasKeySet}},created:function(){this.invKey=this.urlKey||"";var e=localStorage.getItem("nickname");e&&(this.nickname=e)},mounted:function(){this.$refs.nickname.focus()},watch:{invKey:function(){this.$emit("changeKey")},nickname:function(){this.$emit("changeNick")}}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label is-large"},[e._v("Nickname")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],ref:"nickname",staticClass:"input is-large",class:e.dangerIfExists(e.errors.nickname),attrs:{placeholder:"Choose a nickname..."},domProps:{value:e.nickname},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleKeyupEnter(t)},input:function(t){t.target.composing||(e.nickname=t.target.value)}}}),e._v(" "),e.errors.nickname?n("p",{staticClass:"help is-danger"},[e._v("\n              "+e._s(e.errors.nickname)+"\n            ")]):e._e()])]),e._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-expanded"},[n("div",{staticClass:"field has-addons is-fullwidth"},[n("div",{staticClass:"control is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.invKey,expression:"invKey"}],staticClass:"input is-large",class:e.dangerIfExists(e.errors.invKey),attrs:{type:"text",placeholder:"Invitation key"},domProps:{value:e.invKey},on:{input:function(t){t.target.composing||(e.invKey=t.target.value)}}}),e._v(" "),e.errors.invKey?n("p",{staticClass:"help is-danger"},[e._v("\n                      "+e._s(e.errors.invKey)+"\n                    ")]):e._e()]),e._v(" "),n("div",{staticClass:"control"},[n("a",{staticClass:"button is-info is-large",attrs:{disabled:!e.fieldsAreValid},on:{click:e.joinGame}},[e._v("\n                    Join existing game\n                  ")])])])]),e._v(" "),n("div",{staticClass:"column is-narrow"},[n("button",{staticClass:"button is-primary is-large",attrs:{disabled:!e.hasNicknameSet},on:{click:e.createGame}},[e._v("\n                Create new game\n              ")])])])])])},staticRenderFns:[]},b=n("VU/8")(T,R,!1,function(e){n("7I6i")},null,null).exports,P="BEFORE",M="TRADING",w="CHICAGO",x="PLAYING",O="AFTER",I=n("Xxa5"),D=n.n(I),G=n("exGp"),K=n.n(G),H={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"media"},[n("div",{staticClass:"media-left"},[n("figure",{staticClass:"image",class:e.figureClass},[n("img",{staticClass:"avatar",attrs:{src:e.getAvatarUrl(e.player),alt:"Placeholder image"}})])]),e._v(" "),n("div",{staticClass:"media-content",staticStyle:{overflow:"hidden"}},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("p",{staticClass:"title is-4"},[e._v("\n          "+e._s(e.player.name||e.fallbackName)+"\n        ")]),e._v(" "),n("p",{staticClass:"subtitle is-6"},[e._v("\n          "+e._s(e.player.score)+" points\n        ")])]),e._v(" "),n("div",{staticClass:"column is-expanded"},[e.player.hand?n("div",{staticStyle:{"padding-right":"40px"}},e._l(e.player.hand.played,function(t){return n("figure",{staticClass:"image is-inline-flex",staticStyle:{width:"66px",height:"96px","margin-right":"-40px"}},[n("img",{class:e.isBaseCard(t)?"baseCard":"",attrs:{src:e.getCardUrl(t),alt:t.type+""+t.value}})])})):e._e()]),e._v(" "),n("div",{staticClass:"column is-narrow"},[e.player.hasTakenChicago?n("span",{staticClass:"tag is-light",staticStyle:{"margin-left":"10px"}},[e._v("\n          ðŸš€\n        ")]):e._e(),e._v(" "),!e.isMe&&e.isCurrentPlayer(e.player)?n("span",{staticClass:"tag is-info",staticStyle:{"margin-left":"10px"}},[e._v("\n          PLAYING\n        ")]):e._e(),e._v(" "),e.isDealer(e.player)?n("span",{staticClass:"tag is-dark",staticStyle:{"margin-left":"10px"}},[e._v("\n          DEALER\n        ")]):e._e(),e._v(" "),e.player.winner?n("span",{staticClass:"tag is-success",staticStyle:{"margin-left":"10px"}},[e._v("\n          WINNER\n        ")]):e._e()])])])])},staticRenderFns:[]},U=n("VU/8")({name:"Player",props:["player","baseMove","currentPlayer","dealer","fallbackName","variant","isMe"],computed:{figureClass:function(){var e="large"===this.variant?96:48;return"is-"+e+"x"+e}},methods:{isBaseCard:function(e){return!!this.baseMove&&e.suit===this.baseMove.card.suit&&e.value===this.baseMove.card.value},isCurrentPlayer:function(e){return this.currentPlayer&&this.currentPlayer.id===e.id},isDealer:function(e){return this.dealer&&this.dealer.id===e.id}}},H,!1,null,null,null).exports,L={name:"UserArea",props:["controlPlayer","baseMove","currentPlayer","dealer"],components:{Player:U}},$={render:function(){var e=this.$createElement;return(this._self._c||e)("Player",{attrs:{isMe:!0,variant:"large",fallbackName:"You",player:this.controlPlayer,baseMove:this.baseMove,currentPlayer:this.currentPlayer,dealer:this.dealer}})},staticRenderFns:[]},W="SEND_ACTION",F={props:["game","me","dealer","controlPlayer","markedCards","currentPlayer","baseMove"],name:"Controls",components:{UserArea:n("VU/8")(L,$,!1,null,null,null).exports},data:function(){return{copiedKey:!1,inviteText:"Invite friends",phase:s}},methods:{startGame:function(){this.doAction(new N("START_GAME"))},trade:function(){this.doAction(new N("THROW",this.markedCards))},passTrade:function(){this.doAction(new N("THROW",[]))},callChicago:function(){this.doAction(new N("CHICAGO",!0))},passChicago:function(){this.doAction(new N("CHICAGO",!1))},play:function(){this.doAction(new N("MOVE",this.markedCard))},deal:function(){this.doAction(new N("DEAL_CARDS"))},restartGame:function(){this.doAction(new N("RESTART_GAME"))},doAction:function(e){this.$store.dispatch(W,e),this.$emit("action")},isPhase:function(e){return this.game.round.phase===e},copyLink:function(){var e=this;return K()(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tmpKey=e.game.invKey,t.next=3,navigator.clipboard.writeText(window.location.href);case 3:e.copiedKey=!0,e.inviteText="Link copied to clipboard!";case 5:case"end":return t.stop()}},t,e)}))()}},computed:{checkOrKey:function(){return this.copiedKey?"fa fa-check":"fa fa-key"},canStart:function(){return this.me.id===this.game.host.id&&this.game.players.length>1&&!this.game.started},canRestart:function(){return this.me.id===this.game.host.id&&this.game.hasWinners},markedCard:function(){return 1===this.markedCards.length&&this.markedCards[0]}}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("UserArea",{attrs:{controlPlayer:e.controlPlayer,baseMove:e.baseMove,currentPlayer:e.currentPlayer,dealer:e.dealer}})],1),e._v(" "),n("div",{staticClass:"column"}),e._v(" "),n("div",{staticClass:"column is-narrow"},[e.game.started?e._e():n("span",{staticClass:"tag is-medium is-primary",staticStyle:{cursor:"pointer"},on:{click:e.copyLink,mouseleave:function(t){e.inviteText="Invite friends",e.copiedKey=!1}}},[n("span",{staticClass:"icon"},[n("i",{class:e.checkOrKey})]),e._v(" "),n("span",[e._v(e._s(e.inviteText))])]),e._v(" "),e.canStart&&!e.canRestart?n("a",{staticClass:"tag is-medium",on:{click:e.startGame}},[e._v("Start game")]):e._e(),e._v(" "),e.canRestart?n("a",{staticClass:"tag is-medium is-warning",on:{click:e.restartGame}},[e._m(0),e._v(" "),n("span",[e._v("Restart")])]):e._e(),e._v(" "),e.me.imDealing&&e.isPhase(e.phase.AFTER)?n("span",[n("a",{staticClass:"tag is-danger is-medium",on:{click:e.deal}},[e._v("DEAL CARDS")])]):e.me.isMyTurn?n("span",[e.isPhase(e.phase.TRADING)?n("span",[e.markedCards.length?n("a",{staticClass:"tag is-success is-medium",on:{click:e.trade}},[e._v("TRADE ("+e._s(e.markedCards.length)+")")]):n("a",{staticClass:"tag is-info is-medium",on:{click:e.passTrade}},[e._v("YOUR TURN (PASS)")])]):e._e(),e._v(" "),e.isPhase(e.phase.CHICAGO)?n("span",[n("span",[e._v("Want Chicago?")]),e._v(" "),n("a",{staticClass:"tag is-success is-medium",on:{click:e.callChicago}},[e._v("YES")]),e._v(" "),n("a",{staticClass:"tag is-danger is-medium",on:{click:e.passChicago}},[e._v("NO")])]):e._e(),e._v(" "),e.isPhase(e.phase.PLAYING)?n("span",[e.markedCard?n("a",{staticClass:"tag is-success is-medium",on:{click:e.play}},[e._v("PLAY CARD")]):n("span",{staticClass:"tag is-black is-medium"},[e._v("YOUR TURN")])]):e._e()]):n("span",[n("span",{staticClass:"tag is-warning is-medium"},[e._v("WAITING")])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fa fa-refresh"})])}]},Y=n("VU/8")(F,V,!1,function(e){n("yyoi")},"data-v-b4e68880",null).exports,B={name:"Players",props:["players","baseMove","currentPlayer","dealer"],components:{Player:U}},j={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"columns"},e._l(e.players,function(t,s){return n("div",{staticClass:"column"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("Player",{attrs:{isMe:!1,fallbackName:"Player "+s+1,player:t,currentPlayer:e.currentPlayer,baseMove:e.baseMove,dealer:e.dealer}})],1)])])}))])])},staticRenderFns:[]},J=n("VU/8")(B,j,!1,function(e){n("PEPo")},"data-v-4d26b5da",null).exports,q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"columns is-mobile"},e._l(e.me.hand,function(t){return n("div",{staticClass:"column has-text-centered"},[n("img",{staticClass:"playingCard",class:e.getCardClasses(t),attrs:{src:e.getCardUrl(t)},on:{click:function(n){e.toggleMark(t)}}})])}))])])},staticRenderFns:[]},z=n("VU/8")({props:["me","phase","markedCards"],name:"MyHand",methods:{toggleMark:function(e){this.$emit("toggleMark",e)},isMarked:function(e){return this.markedCards.includes(e)},getCardClasses:function(e){return this.me.isMyTurn?this.isMarked(e)?"markedCard myTurn":"myTurn":""}}},q,!1,function(e){n("BI6/")},"data-v-74bc1474",null).exports,Q=n("7nRM"),X=n.n(Q),Z=n("mwJQ"),ee=n.n(Z),te={name:"ChatSender",data:function(){return{message:""}},methods:{sendChatMessage:function(){this.message&&(this.doAction(new N("SEND_CHAT_MESSAGE",this.message)),this.message="")},doAction:function(e){this.$store.dispatch(W,e)}}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control has-icons-left has-icons-right"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.message,expression:"message",modifiers:{trim:!0}}],staticClass:"input is-rounded",attrs:{placeholder:"Message",type:"text"},domProps:{value:e.message},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.sendChatMessage(t)},input:function(t){t.target.composing||(e.message=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),e._m(0)]),e._v(" "),n("div",{staticClass:"control"},[n("a",{staticClass:"button is-info is-rounded",attrs:{disabled:!e.message},on:{click:e.sendChatMessage}},[e._m(1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small is-left"},[t("i",{staticClass:"fas fa-comment"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small",staticStyle:{display:"inline-block","margin-left":"-15px"}},[t("i",{staticClass:"fas fa-paper-plane"})])}]},se=n("VU/8")(te,ne,!1,null,null,null).exports,ae=new ee.a;ae.replace_mode="img",ae.img_set="apple",ae.img_sets.apple.path="https://raw.githubusercontent.com/iamcal/emoji-data/master/img-apple-64/";var ie={CLUBS:"â™£ï¸",HEARTS:"â¤ï¸",DIAMONDS:"â™¦ï¸",SPADES:"â™ ï¸"},re=function(e){var t=e.split(""),n=X()(t),s=n[0],a=n.slice(1);return s.toUpperCase()+a.join("").toLowerCase()},ce=function(e){var t=re(e.value);return ie[e.suit]+" "+t},oe=function(e){var t=1===e.points?"point":"points";return e.points+" "+t},le=m()({props:["game"],name:"EventLog",components:{ChatSender:se},computed:{events:function(){return this.game.events}},methods:{f:ae.replace_unified.bind(ae),formatServerEvent:function(e){switch(e.action){case"NEW_ROUND":return"âœ¨ A new round begins âœ¨";case"TRICK_DONE":return"ðŸ‘€"}},formatPlayerEvent:function(e){switch(e.action){case"CHAT_MESSAGE":var t=function(e){var t=document.createElement("pre"),n=document.createTextNode(e);return t.appendChild(n),t.innerHTML?t.innerHTML.trim():void 0}(e.message);return t?"ðŸ’¬ "+t:void 0;case"TRADED":var n=1===e.numCards?"card":"cards",s=0===e.numCards?"ðŸ¤”":"ðŸ”";return"traded "+e.numCards+" "+n+" "+s;case"PLAYED":return"played "+ce(e.card);case"WON_TRICK":return"took the trick!";case"CALLED_CHICAGO":return"called Chicago! ðŸš€";case"LOST_CHICAGO":return"lost 15 points for failing their Chicago... ðŸ¥²";case"WON_CHICAGO":return"got 15 points for their Chicago! ðŸ¥³";case"WON_ROUND":var a=5===e.points?"closing with a Two!":"winning!";return"got "+oe(e)+" for "+a+" ðŸ™Œ";case"WON_BEST_HAND":var i=re(e.handType.replaceAll("_"," "));return"got "+oe(e)+" for a "+i+" ðŸ’°";case"WON_GAME":return"won the game! ðŸ‘‘ ðŸ‘‘ ðŸ‘‘";case"WON_ROUND_GUARANTEED":var r=e.cards.map(ce).join(", ");return 1===e.cards.length?"won the round with an unbeatable "+r+"! ðŸ’ª":"made it rain ðŸ’¦ with "+r}}}},"components",{ChatSender:se}),ue={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section pb-0 pt-0",staticStyle:{position:"relative"}},[n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],domProps:{innerHTML:e._s(e.f("âœ¨ðŸ’°ðŸ‘€ðŸ¤”ðŸ”ðŸš€ðŸ¥²ðŸ¥³ðŸ™ŒðŸ‘‘ðŸ’¦â™£ï¸â¤ï¸â™¦ï¸â™ ï¸"))}}),e._v(" "),n("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{always:!1,smooth:!0},expression:"{ always: false, smooth: true }"}],staticClass:"disable-scrollbars content is-flex is-justify-content-flex-start is-flex-direction-column",staticStyle:{overflow:"scroll",height:"300px",width:"400px","padding-top":"40px"}},e._l(e.events,function(t){return n("div",["server"===t.actor.id&&e.formatServerEvent(t)?n("div",{staticStyle:{"border-bottom":"1px solid #ccc",height:"15px","text-align":"center","margin-bottom":"15px"}},[n("span",{staticClass:"has-text-grey is-size-7",staticStyle:{height:"40px","background-color":"#fff",padding:"5px"},domProps:{innerHTML:e._s(e.f(e.formatServerEvent(t)))}})]):e.formatPlayerEvent(t)?n("div",[n("strong",[e._v(e._s(t.actor.name))]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.f(e.formatPlayerEvent(t)))}}),e._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{width:"30px"}}),e._v(" "),n("span",{staticClass:"has-text-grey-light is-size-7",staticStyle:{"line-height":"30px"}},[n("timeago",{attrs:{"auto-update":5,datetime:t.timestamp,"converter-options":{includeSeconds:!0}}})],1)]):e._e(),e._v(" "),n("span",{ref:"rows",refInFor:!0})])}))]),e._v(" "),n("div",{staticClass:"fade-overlay"}),e._v(" "),n("ChatSender")],1)},staticRenderFns:[]},de=n("VU/8")(le,ue,!1,function(e){n("xaxT")},"data-v-b904c80c",null).exports,me={name:"Game",props:{game:{type:Object,required:!0},me:{type:Object,required:!0}},components:{Controls:Y,Players:J,MyHand:z,EventLog:de},data:function(){return{markedCards:[]}},methods:{toggleMark:function(e){this.me.isMyTurn&&!this.isPhase(w)?this.isPhase(x)?this.markSingle(e):this.isMarked(e)?this.unmark(e):this.mark(e):this.unmarkAll()},unmark:function(e){this.markedCards=this.markedCards.filter(function(t){return t!==e})},unmarkAll:function(){this.markedCards=[]},mark:function(e){this.markedCards.push(e)},markSingle:function(e){this.markedCards=[e]},isMarked:function(e){return this.markedCards.includes(e)},isPhase:function(e){return this.game.round.phase===e}},computed:{baseMove:function(){if(this.currentTrick)return this.currentTrick.moves&&this.currentTrick.moves.length>0&&this.currentTrick.moves[0]},currentTrick:function(){var e=this.game.round,t=e&&e.tricks;if(t)return t.length>0&&t[t.length-1]},currentPlayer:function(){return this.game.round&&this.game.round.currentPlayer},dealer:function(){return this.game.dealer},controlPlayer:function(){var e=this;return this.game.players.find(function(t){return t.id===e.me.id})},otherPlayers:function(){var e=this;return this.game.players.filter(function(t){return t.id!==e.me.id})}}},he={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Controls",{attrs:{game:this.game,me:this.me,controlPlayer:this.controlPlayer,currentPlayer:this.currentPlayer,dealer:this.dealer,baseMove:this.baseMove,markedCards:this.markedCards},on:{action:this.unmarkAll}}),this._v(" "),t("section",{staticClass:"section pb-0 pt-0 is-flex is-flex-direction-row"},[t("EventLog",{attrs:{game:this.game}}),this._v(" "),this.game.started?t("MyHand",{attrs:{me:this.me,markedCards:this.markedCards},on:{toggleMark:this.toggleMark}}):this._e()],1),this._v(" "),this.otherPlayers?t("Players",{attrs:{players:this.otherPlayers,baseMove:this.baseMove,currentPlayer:this.currentPlayer,dealer:this.dealer}}):this._e()],1)},staticRenderFns:[]},ve=n("VU/8")(me,he,!1,function(e){n("Bkyh")},null,null).exports,pe={props:{connected:{type:Boolean,default:!1}},methods:{handleClick:function(){this.connected||this.$emit("reconnect")}},computed:{statusText:function(){return this.connected?"Connected to server":"Not connected. Click to try again"},statusClass:function(){return this.connected?"is-success":"is-danger"},statusIcon:function(){return this.connected?"fa-check":"fa-refresh"}}},fe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container breathe"},[t("a",{staticClass:"button is-pulled-right is-small",class:this.statusClass,on:{click:this.handleClick}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fa",class:this.statusIcon})]),this._v(" "),t("span",[this._v(this._s(this.statusText))])])])},staticRenderFns:[]},ge="SET_NICKNAME_ERROR",_e="SET_INVKEY_ERROR",Ce={components:{Start:b,Game:ve,ConnectionStatus:n("VU/8")(pe,fe,!1,function(e){n("IpWz")},null,null).exports},name:"Wrapper",computed:Object(h.b)({game:"game",me:"me",errors:"errors",socket:"socket"}),methods:{dispatchAction:function(e){this.$store.dispatch(W,e)},clearKeyError:function(){this.$store.commit(_e,"")},clearNickError:function(){this.$store.commit(ge,"")},connect:function(){this.$store.dispatch("CONNECT")}},created:function(){this.connect()}},ye={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("ConnectionStatus",{attrs:{connected:this.socket.connected},on:{reconnect:this.connect}}),this._v(" "),this.game.invKey?t("Game",{attrs:{me:this.me,game:this.game}}):t("Start",{attrs:{errors:this.errors,urlKey:this.$route.params.key},on:{action:this.dispatchAction,changeKey:this.clearKeyError,changeNick:this.clearNickError}})],1)},staticRenderFns:[]},Ee=n("VU/8")(Ce,ye,!1,function(e){n("A2Hp")},"data-v-41efd68f",null).exports;i.a.use(p.a);var ke,Ae,Se,Ne,Te,Re=[{path:"/:key",component:Ee},{path:"/",component:Ee}],be=new p.a({base:"/",routes:Re,mode:"hash"}),Pe={state:{host:{id:""},dealer:{id:""},invKey:"",players:[],events:[],started:!1,hasWinners:!1,round:{currentPlayer:"",phase:"",tricks:[]}},mutations:m()({},"MIRROR_GAME_STATE",function(e,t){e.host.id=t.host.id,e.dealer=t.dealer,e.invKey=t.invitationKey,e.players=t.players,e.events=t.events,e.started=t.started,e.hasWinners=t.hasWinners,t.currentRound&&(e.round.currentPlayer=t.currentRound.currentPlayer,e.round.phase=t.currentRound.phase,e.round.tricks=t.currentRound.tricks)}),actions:m()({},"HANDLE_SNAPSHOT",function(e,t){var n=e.commit,s=JSON.parse(t);be.push(s.game.invitationKey),n("SET_MY_TURN",s.myTurn),n("SET_IM_DEALING",s.imDealing),n("SET_MY_HAND",s.myHand),n("SET_MY_PLAYER",s.me),n("MIRROR_GAME_STATE",s.game)})},Me={state:{nickname:"",invKey:""},mutations:(ke={},m()(ke,ge,function(e,t){e.nickname=t}),m()(ke,_e,function(e,t){e.invKey=t}),ke),actions:(Ae={},m()(Ae,"HANDLE_GAME_ERROR",function(e,t){e.state;window.alert(t)}),m()(Ae,"HANDLE_JSON_ERROR",function(e,t){e.state;window.alert("Something went wrong! Please try again")}),Ae)},we="SET_CONNECTED_FALSE",xe=function e(t){C()(this,e);var n=JSON.parse(t.data),s=n.type,a=n.body;this.type=s,this.body=a},Oe={connected:!1,socket:void 0},Ie=(Se={},m()(Se,"SET_CONNECTED_TRUE",function(e){e.connected=!0}),m()(Se,we,function(e){e.connected=!1}),m()(Se,"SET_SOCKET",function(e,t){e.socket=t}),Se),De={state:Oe,actions:(Ne={},m()(Ne,"CONNECT",function(e){var t=e.commit,n=e.dispatch,s=new WebSocket("wss://chicago-server.herokuapp.com/game"),a=void 0;s.onopen=function(){var e=k()(new N("PING","pong"));a=setInterval(function(){return s.send(e)},1e4),t("SET_CONNECTED_TRUE")},s.onclose=function(){clearInterval(a),t(we)},s.onmessage=function(e){n("HANDLE_MESSAGE",e)},t("SET_SOCKET",s)}),m()(Ne,"HANDLE_MESSAGE",function(e,t){var n=e.commit,s=e.dispatch,a=new xe(t);switch(a.type){case"KEY_ERROR":n(_e,a.body);break;case"NICKNAME_ERROR":n(ge,a.body);break;case"GAME_ERROR":s("HANDLE_GAME_ERROR",a.body);break;case"JSON_ERROR":s("HANDLE_JSON_ERROR",a.body);break;case"SNAPSHOT":s("HANDLE_SNAPSHOT",a.body)}}),m()(Ne,W,function(e,t){e.state.socket.send(k()(t))}),Ne),mutations:Ie};i.a.use(h.a);var Ge=new h.a.Store({modules:(Te={},m()(Te,"me",v),m()(Te,"game",Pe),m()(Te,"errors",Me),m()(Te,"socket",De),Te)}),Ke=n("bNL2"),He=n.n(Ke),Ue=n("J/A3");i.a.use(Ue.a,{}),i.a.use(He.a),i.a.config.productionTip=!1,i.a.mixin({methods:{getCardUrl:function(e){return"static/cards/"+e.value+"_"+e.suit+".svg"},getAvatarUrl:function(e){return"https://avatars.dicebear.com/api/adventurer-neutral/"+e.id+".svg"}}}),new i.a({store:Ge,router:be,el:"#app",render:function(e){return e(u)}}).$mount("#app")},PEPo:function(e,t){},WbD8:function(e,t){},xaxT:function(e,t){},yyoi:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.36604681a6152508e519.js.map