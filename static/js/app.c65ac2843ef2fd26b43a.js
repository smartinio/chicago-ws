webpackJsonp([1],{"3Mb6":function(e,t){},DdD0:function(e,t){},EsBq:function(e,t){},MxfR:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={};n.d(s,"BEFORE",function(){return U}),n.d(s,"TRADING",function(){return $}),n.d(s,"CHICAGO",function(){return j}),n.d(s,"PLAYING",function(){return F}),n.d(s,"AFTER",function(){return Y});var a,i,r=n("/5sW"),o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{visibility:"hidden",height:"0",width:"0"}},e._l(e.cards.suits,function(t){return n("div",e._l(e.cards.values,function(s){return n("img",{attrs:{src:e.getSrc(s,t)}})}))}))},staticRenderFns:[]},c=void 0,l={name:"app",components:{Preloader:n("VU/8")({methods:{getSrc:function(e,t){return this.getCardUrl({value:e,suit:t})}},data:function(){return{cards:{suits:{HEARTS:"HEARTS",SPADES:"SPADES",DIAMONDS:"DIAMONDS",CLUBS:"CLUBS"},values:{TWO:"TWO",THREE:"THREE",FOUR:"FOUR",FIVE:"FIVE",SIX:"SIX",SEVEN:"SEVEN",EIGHT:"EIGHT",NINE:"NINE",TEN:"TEN",JACK:"JACK",QUEEN:"QUEEN",KING:"KING",ACE:"ACE"}}}}},o,!1,null,null,null).exports},mounted:function(){c=setInterval(function(){fetch("https://chicago-server.herokuapp.com",{method:"HEAD"})},1e4)},unmounted:function(){clearInterval(c)}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view"),this._v(" "),t("Preloader")],1)},staticRenderFns:[]},d=n("VU/8")(l,u,!1,function(e){n("UUE2")},null,null).exports,m=n("bOdI"),h=n.n(m),p=n("NYxO"),v={state:{isMyTurn:!1,imDealing:!1,hand:[],id:"",name:"",score:0,hasTakenChicago:!1,winner:!1},mutations:(a={},h()(a,"SET_MY_HAND",function(e,t){e.hand=t}),h()(a,"SET_MY_TURN",function(e,t){e.isMyTurn=t}),h()(a,"SET_IM_DEALING",function(e,t){e.imDealing=t}),h()(a,"SET_MY_PLAYER",function(e,t){e.id=t.id,e.name=t.name,e.score=t.score,e.hasTakenChicago=t.hasTakenChicago,e.winner=t.winner}),a)},f="SET_CURRENTLY_IN_GAME",g="HANDLE_CURRENTLY_IN_GAME",_=n("/ocq"),y=n("BO1k"),C=n.n(y),E=n("mvHQ"),k=n.n(E),S="SEND_ACTION",A=n("Zrlr"),T=n.n(A),b=function e(t,n){T()(this,e),this.nickname=t,this.key=n},x=function e(t,n){T()(this,e),this.nickname=t,this.rules={chicagoBestHand:n.chicagoBestHand,numTrades:n.numTrades,oneOpen:n.oneOpen}},N=function e(t,n){T()(this,e),this.playerId=t,this.key=n},w=n("pFYg"),O=n.n(w),R=function e(t,n){T()(this,e),(void 0===n?"undefined":O()(n))!==O()("")&&(n=k()(n)),this.type=t,this.value=n},I={props:{connected:{type:Boolean,default:!1}},computed:{statusText:function(){return this.connected?"Connected":"Connecting"},statusClass:function(){return this.connected?"is-success is-light":"is-warning"},statusIcon:function(){return this.connected?"fa-check":"fa-spinner"},animationClass:function(){return this.connected?"":"is-spinning"}}},M={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("a",{staticClass:"button is-small is-rounded",class:this.statusClass},[t("span",{staticClass:"icon is-small",class:this.animationClass},[t("i",{staticClass:"fa",class:this.statusIcon})]),this._v(" "),t("span",[this._v(this._s(this.statusText))])])])},staticRenderFns:[]},P=n("VU/8")(I,M,!1,function(e){n("EsBq")},"data-v-be65522c",null).exports,G={name:"Start",components:{ConnectionStatus:P},props:{currentlyInGame:{type:Boolean,default:void 0},connected:{type:Boolean,required:!0},urlKey:{type:String,default:""},errors:{type:Object,required:!0}},data:function(){return{tab:"create",invKey:"",nickname:"",leftGame:!1,rules:{numTrades:2,chicagoBestHand:!1,oneOpen:"ALL"}}},methods:{isTab:function(e){return this.tab===e},rejoin:function(){this.$emit("rejoin")},leave:function(){this.$emit("leave"),this.leftGame=!0},rememberNickname:function(){this.nickname&&localStorage.setItem("nickname",this.nickname)},rememberRules:function(){localStorage.setItem("rules",k()(this.rules))},createGame:function(){if(this.hasNicknameSet){var e=new x(this.nickname,this.rules),t=new R("NEW_GAME",e);this.$emit("action",t),this.rememberNickname(),this.rememberRules()}},joinGame:function(){if(this.fieldsAreValid){var e=new b(this.nickname,this.invKey),t=new R("JOIN_GAME",e);this.$emit("action",t),this.rememberNickname()}},checkGame:function(){var e=localStorage.getItem("invitationKey"),t=localStorage.getItem("playerId");if(e&&t){var n=new N(t,e),s=new R("CHECK_GAME",n);this.$store.dispatch(S,s)}else localStorage.removeItem("invitationKey"),localStorage.removeItem("playerId"),this.$store.commit("SET_CURRENTLY_IN_GAME",!1)},dangerIfExists:function(e){return this[e]?"is-danger":""},handleKeyupEnter:function(){this.invKey?this.joinGame():this.createGame()}},computed:{checkingGame:function(){return void 0===this.currentlyInGame},isAlreadyInAGame:function(){return!this.leftGame&&this.currentlyInGame},hasNicknameSet:function(){return this.nickname.length>0},hasKeySet:function(){var e=this.invKey.split("-");if(5===e.length){var t=!0,n=!1,s=void 0;try{for(var a,i=C()(e);!(t=(a=i.next()).done);t=!0){if(""===a.value)return!1}}catch(e){n=!0,s=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw s}}return!0}return!1},hasErrors:function(){return this.errors.invKey.length>0||this.errors.nickname.length>0},fieldsAreValid:function(){return!this.hasErrors&&this.hasNicknameSet&&this.hasKeySet}},created:function(){this.invKey=this.urlKey||"";var e=localStorage.getItem("nickname"),t=localStorage.getItem("rules");t&&(this.rules=JSON.parse(t)),e&&(this.nickname=e)},mounted:function(){this.invKey&&(this.tab="join"),this.$refs.nickname.focus()},watch:{connected:function(e){e&&this.checkGame()},urlKey:function(e){e&&(this.tab="join"),this.invKey=e||this.invKey||""},invKey:function(){this.$emit("changeKey")},nickname:function(){this.$emit("changeNick")}}},D={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("ConnectionStatus",{attrs:{connected:e.connected&&!e.checkingGame}}),e._v(" "),e.isAlreadyInAGame?n("section",{staticClass:"hero is-warning",staticStyle:{"margin-top":"30px"}},[n("div",{staticClass:"hero-body"},[n("p",{staticClass:"title"},[e._v("\n          You're currently in a game\n        ")]),e._v(" "),n("p",{staticClass:"subtitle"},[e._v("\n          Do you want to rejoin?\n        ")]),e._v(" "),n("p",[n("a",{staticClass:"button is-black",on:{click:e.rejoin}},[e._v("Yes, rejoin")]),e._v(" "),n("a",{staticClass:"button is-warning is-light",on:{click:e.leave}},[e._v("No, leave game")])])])]):e._e(),e._v(" "),n("div",{staticClass:"tabs is-boxed is-large is-centered is-fullwidth",staticStyle:{"margin-top":"30px"}},[n("ul",[n("li",{class:e.isTab("create")?"is-active":""},[n("a",{on:{click:function(t){e.tab="create"}}},[e._m(0),e._v(" "),n("span",[e._v("Create new game")])])]),e._v(" "),n("li",{class:e.isTab("join")?"is-active":""},[n("a",{on:{click:function(t){e.tab="join"}}},[e._m(1),e._v(" "),n("span",[e._v("Join existing game")])])])])]),e._v(" "),e.isTab("create")?n("div",[n("div",{staticClass:"field"},[n("label",{staticClass:"label is-large"},[e._v("Nickname")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],ref:"nickname",staticClass:"input is-large is-rounded",class:e.dangerIfExists(e.errors.nickname),attrs:{disabled:e.isAlreadyInAGame||e.checkingGame,placeholder:"Choose a nickname...",maxlength:"15"},domProps:{value:e.nickname},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleKeyupEnter(t)},input:function(t){t.target.composing||(e.nickname=t.target.value)}}}),e._v(" "),e.errors.nickname?n("p",{staticClass:"help is-danger"},[e._v("\n            "+e._s(e.errors.nickname)+"\n          ")]):e._e()])]),e._v(" "),n("label",{staticClass:"label is-large"},[e._v("Rules")]),e._v(" "),n("div",{staticClass:"field is-grouped is-grouped-multiline"},[n("div",{staticClass:"control"},[n("div",{staticClass:"select is-rounded is-large"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.rules.numTrades,expression:"rules.numTrades"}],attrs:{disabled:e.isAlreadyInAGame||e.checkingGame},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.rules,"numTrades",t.target.multiple?n:n[0])}}},[n("option",{domProps:{value:2}},[e._v("2 trades")]),e._v(" "),n("option",{domProps:{value:3}},[e._v("3 trades")])])])]),e._v(" "),n("div",{staticClass:"control"},[n("div",{staticClass:"select is-rounded is-large"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.rules.chicagoBestHand,expression:"rules.chicagoBestHand"}],attrs:{disabled:e.isAlreadyInAGame||e.checkingGame},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.rules,"chicagoBestHand",t.target.multiple?n:n[0])}}},[n("option",{domProps:{value:!1}},[e._v("Chicago: All tricks")]),e._v(" "),n("option",{domProps:{value:!0}},[e._v("Chicago: All tricks + Best hand")])])])]),e._v(" "),n("div",{staticClass:"control"},[n("div",{staticClass:"select is-rounded is-large"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.rules.oneOpen,expression:"rules.oneOpen"}],attrs:{disabled:e.isAlreadyInAGame||e.checkingGame},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.rules,"oneOpen",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"ALL"}},[e._v("1 open: All trades")]),e._v(" "),n("option",{attrs:{value:"FINAL"}},[e._v("1 open: Final trade")])])])])]),e._v(" "),n("div",{staticClass:"field",staticStyle:{"margin-top":"18px"}},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-success is-rounded is-large",attrs:{disabled:!e.hasNicknameSet||e.isAlreadyInAGame||e.checkingGame},on:{click:e.createGame}},[e._v("\n            Create new game\n          ")])])])]):e._e(),e._v(" "),e.isTab("join")?n("div",[n("div",{staticClass:"field"},[n("label",{staticClass:"label is-large"},[e._v("Nickname")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],ref:"nickname",staticClass:"input is-large is-rounded",class:e.dangerIfExists(e.errors.nickname),attrs:{disabled:e.isAlreadyInAGame||e.checkingGame,placeholder:"Choose a nickname...",maxlength:"15"},domProps:{value:e.nickname},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleKeyupEnter(t)},input:function(t){t.target.composing||(e.nickname=t.target.value)}}}),e._v(" "),e.errors.nickname?n("p",{staticClass:"help is-danger"},[e._v("\n            "+e._s(e.errors.nickname)+"\n          ")]):e._e()])]),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label is-large"},[e._v("Invitation key")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.invKey,expression:"invKey"}],staticClass:"input is-large is-rounded",class:e.dangerIfExists(e.errors.invKey),attrs:{disabled:e.isAlreadyInAGame||e.checkingGame,type:"text",placeholder:"Invitation key"},domProps:{value:e.invKey},on:{input:function(t){t.target.composing||(e.invKey=t.target.value)}}}),e._v(" "),e.errors.invKey?n("p",{staticClass:"help is-danger"},[e._v("\n              "+e._s(e.errors.invKey)+"\n            ")]):e._e()])]),e._v(" "),n("div",{staticClass:"field",staticStyle:{"margin-top":"30px"}},[n("div",{staticClass:"control"},[n("a",{staticClass:"button is-info is-large is-rounded",attrs:{disabled:!e.fieldsAreValid||e.isAlreadyInAGame||e.checkingGame},on:{click:e.joinGame}},[e._v("\n            Join game\n          ")])])])]):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-plus"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-people-group"})])}]},K=n("VU/8")(G,D,!1,function(e){n("MxfR")},null,null).exports,L=n("Gu7T"),H=n.n(L),U="BEFORE",$="TRADING",j="CHICAGO",F="PLAYING",Y="AFTER",B=n("Xxa5"),V=n.n(B),W=n("exGp"),J=n.n(W),q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.player.hasTakenChicago?t("span",{staticClass:"tag is-light",staticStyle:{"margin-left":"10px"}},[this._v("\n    üöÄ\n  ")]):this._e(),this._v(" "),!this.isMe&&this.isCurrentPlayer(this.player)?t("span",{staticClass:"tag is-info",staticStyle:{"margin-left":"10px"}},[this._v("\n    PLAYING\n  ")]):this._e(),this._v(" "),this.isDealer(this.player)?t("span",{staticClass:"tag is-dark",staticStyle:{"margin-left":"10px"}},[this._v("\n    DEALER\n  ")]):this._e(),this._v(" "),this.player.winner?t("span",{staticClass:"tag is-success",staticStyle:{"margin-left":"10px"}},[this._v("\n    WINNER\n  ")]):this._e()])},staticRenderFns:[]},Q=n("VU/8")({name:"PlayerStatus",props:["player","currentPlayer","dealer","isMe"],methods:{isCurrentPlayer:function(e){return this.currentPlayer&&this.currentPlayer.id===e.id},isDealer:function(e){return this.dealer&&this.dealer.id===e.id}}},q,!1,null,null,null).exports,z=new Audio("static/audio/yourturn.ogg"),X={props:["game","me","dealer","controlPlayer","markedCards","currentPlayer","baseMove"],name:"Controls",components:{PlayerStatus:Q},data:function(){return{copiedKey:!1,inviteText:"Invite friends",phase:s,active:!0}},watch:(i={},h()(i,"me.imDealing",function(){this.canDeal&&!this.active&&z.play()}),h()(i,"me.isMyTurn",function(){this.canAct&&!this.active&&z.play()}),i),created:function(){var e=this;window.onblur=function(){e.active=!1},window.onfocus=function(){e.active=!0}},methods:{startGame:function(){this.doAction(new R("START_GAME"))},deal:function(){this.doAction(new R("DEAL_CARDS"))},restartGame:function(){this.doAction(new R("RESTART_GAME"))},doAction:function(e){this.$store.dispatch(S,e),this.$emit("action")},isPhase:function(e){return this.game.round.phase===e},copyLink:function(){var e=this;return J()(V.a.mark(function t(){return V.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tmpKey=e.game.invKey,t.next=3,navigator.clipboard.writeText(window.location.href);case 3:e.copiedKey=!0,e.inviteText="Link copied to clipboard!";case 5:case"end":return t.stop()}},t,e)}))()}},computed:{canDeal:function(){return this.me.imDealing&&!this.isMidGame},canAct:function(){return this.me.isMyTurn&&this.isMidGame},isMidGame:function(){return!this.isPhase(U)&&!this.isPhase(Y)},canTradeOpenly:function(){return 1==this.markedCards.length},canRespondToOpenCard:function(){return this.game.oneOpen.isOpen},checkOrKey:function(){return this.copiedKey?"fa fa-check":"fa fa-key"},canStart:function(){return this.me.id===this.game.host.id&&this.game.players.length>1&&!this.game.started},canRestart:function(){return this.me.id===this.game.host.id&&this.game.hasWinners},markedCard:function(){return 1===this.markedCards.length&&this.markedCards[0]}}},Z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"is-flex is-flex-direction-row is-justify-content-flex-end",staticStyle:{gap:"10px"}},[e.game.started?e._e():n("span",{staticClass:"tag is-medium is-primary",staticStyle:{cursor:"pointer"},on:{click:e.copyLink,mouseleave:function(t){e.inviteText="Invite friends",e.copiedKey=!1}}},[n("span",{staticClass:"icon"},[n("i",{class:e.checkOrKey})]),e._v(" "),n("span",[e._v(e._s(e.inviteText))])]),e._v(" "),e.canStart&&!e.canRestart?n("a",{staticClass:"tag is-medium",on:{click:e.startGame}},[e._v("Start game")]):e._e(),e._v(" "),e.canRestart?n("a",{staticClass:"tag is-medium is-warning",on:{click:e.restartGame}},[e._m(0),e._v(" "),n("span",[e._v("Restart")])]):e._e(),e._v(" "),e.canDeal?n("span",[n("a",{staticClass:"tag is-danger is-medium deal-pulse",on:{click:e.deal}},[e._v("DEAL CARDS")])]):e.canAct?n("span",[n("span",{staticClass:"tag is-info is-medium"},[e._v("YOUR TURN")])]):n("span",[n("span",{staticClass:"tag is-warning is-medium"},[e._v("WAITING")])])]),e._v(" "),n("div",{staticClass:"is-flex is-justify-content-flex-end",staticStyle:{"margin-top":"10px"}},[n("PlayerStatus",{attrs:{isMe:!0,player:e.controlPlayer,dealer:e.dealer,currentPlayer:e.currentPlayer}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fa fa-refresh"})])}]},ee=n("VU/8")(X,Z,!1,function(e){n("VvPY")},"data-v-27c6d7f0",null).exports,te={name:"Player",props:["player","baseMove","currentPlayer","dealer","fallbackName","variant","isMe"],components:{PlayerStatus:Q},computed:{imHost:function(){return this.$store.state.me.id===this.$store.state.game.host.id},figureClass:function(){var e="large"===this.variant?96:48;return"is-"+e+"x"+e}},methods:{kickPlayer:function(e){var t=new R("KICK_PLAYER",e.id);this.$store.dispatch(S,t)},isBaseCard:function(e){return!!this.baseMove&&(e.suit===this.baseMove.card.suit&&e.value===this.baseMove.card.value)}}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"media",style:e.player.connected?"":"opacity: 0.2"},[n("div",{staticClass:"media-left"},[n("figure",{staticClass:"image",class:e.figureClass},[n("img",{staticClass:"avatar",attrs:{src:e.getAvatarUrl(e.player),alt:"Placeholder image"}})])]),e._v(" "),n("div",{staticClass:"media-content"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("p",{staticClass:"title is-4",staticStyle:{"text-overflow":"ellipsis",width:"150px !important",overflow:"hidden","white-space":"nowrap"}},[e._v("\n          "+e._s(e.player.name||e.fallbackName)+"\n        ")]),e._v(" "),n("p",{staticClass:"subtitle is-6",staticStyle:{"margin-bottom":"5px"}},[e._v("\n          "+e._s(e.player.score)+" points\n        ")]),e._v(" "),!e.isMe&&e.imHost?n("button",{staticClass:"button is-rounded is-small is-danger",on:{click:function(t){e.kickPlayer(e.player)}}},[e._m(0)]):e._e()]),e._v(" "),n("div",{staticClass:"column is-expanded"},[e.player.hand?n("div",{staticStyle:{"padding-right":"40px"}},e._l(e.player.hand.played,function(t){return n("figure",{staticClass:"image is-inline-flex",staticStyle:{width:"66px",height:"96px","margin-right":"-40px"}},[n("img",{class:e.isBaseCard(t)?"red-pulse":"",attrs:{src:e.getCardUrl(t),alt:t.type+""+t.value}})])})):e._e()]),e._v(" "),e.isMe?e._e():n("div",{staticClass:"column is-narrow"},[n("PlayerStatus",{attrs:{currentPlayer:e.currentPlayer,dealer:e.dealer,player:e.player}})],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fa fa-user-slash"})])}]},se=n("VU/8")(te,ne,!1,null,null,null).exports,ae={name:"Players",props:["players","baseMove","currentPlayer","dealer"],components:{Player:se}},ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"is-flex is-flex-direction-column",staticStyle:{width:"100%"}},e._l(e.players,function(t,s){return n("div",{staticStyle:{"padding-top":"15px"}},[n("Player",{attrs:{isMe:!1,variant:"large",fallbackName:"Player "+s+1,player:t,currentPlayer:e.currentPlayer,baseMove:e.baseMove,dealer:e.dealer}})],1)}))},staticRenderFns:[]},re=n("VU/8")(ae,ie,!1,function(e){n("mm1o")},"data-v-0467980e",null).exports,oe={props:["me","game","phase","markedCards"],name:"MyHand",computed:{canReleaseCards:function(){return this.canSelectCards&&this.me.isMyTurn},canSelectCards:function(){return"AFTER"!==this.phase&&!this.canRespondToOpenCard},canTradeOpenly:function(){return"ALL"===this.game.rules.oneOpen?1==this.markedCards.length:"FINAL"===this.game.rules.oneOpen?1==this.markedCards.length&&this.game.round.isFinalTrade:void 0},canSeeOpenCard:function(){return this.game.oneOpen.isOpen},canRespondToOpenCard:function(){return this.canSeeOpenCard&&this.game.oneOpen.player.id===this.me.id}},methods:{toggleMark:function(e){this.canSelectCards&&this.$emit("toggleMark",e)},isMarked:function(e){return this.markedCards.some(function(e){return function(t){return e.suit===t.suit&&e.value===t.value}}(e))},getCardClass:function(e){return this.isMarked(e)?"markedCard":""},getCardButtonClass:function(e){return this.isMarked(e)?"markedCard":"invis"},getTradeButtonClass:function(){return this.markedCards.length?"markedCard":"invis"},doAction:function(e){this.$store.dispatch(S,e),this.$emit("action")},play:function(e){this.me.isMyTurn&&this.doAction(new R("MOVE",e))},trade:function(){this.me.isMyTurn&&this.doAction(new R("THROW",this.markedCards))},tradeOpenly:function(){this.me.isMyTurn&&1===this.markedCards.length&&this.doAction(new R("THROW_ONE_OPEN",this.markedCards[0]))},respondToOneOpen:function(e){this.doAction(new R("RESPOND_ONE_OPEN",e))},respondToChicago:function(e){this.doAction(new R("CHICAGO",e))}}},ce={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"is-flex is-flex-direction-column is-justify-content-flex-end is-align-items-center",staticStyle:{transform:"translateY(100px)"}},["CHICAGO"===e.phase&&e.me.isMyTurn?n("div",{staticClass:"is-flex is-flex-direction-column is-align-items-center"},[n("span",{staticClass:"control-text",staticStyle:{"margin-bottom":"15px","margin-right":"0px"}},[e._v("\n      Want Chicago?\n    ")]),e._v(" "),n("div",{staticClass:"is-flex"},[n("a",{staticClass:"control-button button is-success is-small is-rounded",attrs:{disabled:!e.me.isMyTurn},on:{click:function(t){e.respondToChicago(!0)}}},[e._v("\n        YES\n      ")]),e._v(" "),n("div",{staticStyle:{width:"10px"}}),e._v(" "),n("a",{staticClass:"control-button button is-danger is-small is-rounded",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!e.me.isMyTurn},on:{click:function(t){e.respondToChicago(!1)}}},[e._v("\n        NO\n      ")])])]):e._e(),e._v(" "),"TRADING"===e.phase&&e.canSeeOpenCard?n("div",{staticClass:"is-flex is-flex-direction-column is-align-items-center"},[n("div",{staticClass:"control-text",staticStyle:{"margin-bottom":"15px","margin-right":"0px",overflow:"visible"}},[n("img",{staticClass:"open-card",staticStyle:{maxWidth:"64px"},attrs:{src:e.getCardUrl(e.game.oneOpen.card)}})]),e._v(" "),e.canRespondToOpenCard?n("div",{staticClass:"is-flex"},[n("a",{staticClass:"control-button button is-success is-small is-rounded",attrs:{disabled:!e.me.isMyTurn},on:{click:function(t){e.respondToOneOpen(!0)}}},[e._v("\n        ACCEPT\n      ")]),e._v(" "),n("div",{staticStyle:{width:"10px"}}),e._v(" "),n("a",{staticClass:"control-button button is-danger is-small is-rounded",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!e.me.isMyTurn},on:{click:function(t){e.respondToOneOpen(!1)}}},[e._v("\n        DECLINE\n      ")])]):n("div",{staticClass:"control-text"},[e._v("\n      Open offer for "),n("strong",[e._v(e._s(e.game.oneOpen.player.name))])])]):"TRADING"===e.phase&&e.canTradeOpenly?n("div",[n("a",{staticClass:"control-button button is-success is-small is-rounded",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!e.me.isMyTurn},on:{click:e.trade}},[e._v("\n      TRADE (1)\n    ")]),e._v(" "),n("a",{staticClass:"control-button button is-info is-small is-rounded",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!e.me.isMyTurn},on:{click:e.tradeOpenly}},[e._v("\n      OPEN (1)\n    ")])]):"TRADING"===e.phase&&e.markedCards.length?n("div",[n("a",{staticClass:"control-button button is-small is-rounded is-success",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!e.me.isMyTurn},on:{click:e.trade}},[e._v("\n      TRADE ("+e._s(e.markedCards.length)+")\n    ")])]):"TRADING"===e.phase?n("div",[n("a",{staticClass:"control-button button is-small is-rounded is-info",staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!e.me.isMyTurn},on:{click:e.trade}},[e._v("\n      PASS\n    ")])]):e._e(),e._v(" "),n("div",{staticClass:"is-flex",style:e.canReleaseCards?"opacity: 1":"opacity: 0.4"},e._l(e.me.hand,function(t){return n("div",{staticClass:"is-flex is-flex-direction-column is-align-items-center"},["PLAYING"===e.phase?n("a",{staticClass:"button is-small is-rounded is-success control-button",class:e.getCardButtonClass(t),staticStyle:{"margin-bottom":"15px"},attrs:{disabled:!e.me.isMyTurn},on:{click:function(n){e.play(t)}}},[e._v("\n        PLAY\n      ")]):e._e(),e._v(" "),n("img",{staticClass:"playingCard",class:e.getCardClass(t),attrs:{src:e.getCardUrl(t)},on:{click:function(n){e.toggleMark(t)}}})])}))])},staticRenderFns:[]},le=n("VU/8")(oe,ce,!1,function(e){n("3Mb6")},"data-v-40af35ac",null).exports,ue={name:"ChatSender",data:function(){return{message:""}},methods:{sendChatMessage:function(){this.message&&(this.doAction(new R("SEND_CHAT_MESSAGE",this.message)),this.message="")},doAction:function(e){this.$store.dispatch(S,e)}}},de={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field has-addons",staticStyle:{width:"100%"}},[n("p",{staticClass:"control has-icons-left has-icons-right",staticStyle:{width:"100%"}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.message,expression:"message",modifiers:{trim:!0}}],staticClass:"input is-rounded",attrs:{placeholder:"Message",type:"text"},domProps:{value:e.message},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.sendChatMessage(t)},input:function(t){t.target.composing||(e.message=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),e._m(0)]),e._v(" "),n("div",{staticClass:"control"},[n("a",{staticClass:"button is-info is-rounded",attrs:{disabled:!e.message},on:{click:e.sendChatMessage}},[e._m(1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small is-left"},[t("i",{staticClass:"fas fa-comment"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small",staticStyle:{display:"inline-block","margin-left":"-15px"}},[t("i",{staticClass:"fas fa-paper-plane"})])}]},me=n("VU/8")(ue,de,!1,null,null,null).exports,he=n("7nRM"),pe=n.n(he),ve=n("mwJQ"),fe={CLUBS:"‚ô£Ô∏è",HEARTS:"‚ù§Ô∏è",DIAMONDS:"‚ô¶Ô∏è",SPADES:"‚ô†Ô∏è"},ge=function(e){var t=e.split(""),n=pe()(t),s=n[0],a=n.slice(1);return s.toUpperCase()+a.join("").toLowerCase()},_e=new(n.n(ve).a);_e.replace_mode="img",_e.img_set="apple",_e.img_sets.apple.path="https://raw.githubusercontent.com/iamcal/emoji-data/master/img-apple-64/";var ye=function(e){return e?_e.replace_unified(e):void 0},Ce={methods:{getCardUrl:function(e){return"static/cards/"+e.value+"_"+e.suit+".svg"},getAvatarUrl:function(e){return"https://avatars.dicebear.com/api/adventurer-neutral/"+e.id+".svg"},niceCard:function(e){var t=ge(e.value);return fe[e.suit]+" "+t},capitalize:ge,withEmojis:function(e){return function(){return ye(e.apply(void 0,arguments))}},emojify:ye}},Ee=n("8wyc"),ke=Ce.methods,Se=ke.withEmojis,Ae=ke.capitalize,Te=ke.niceCard,be=function(e){var t=1===e.points?"point":"points";return e.points+" "+t},xe=function(e){var t=document.createElement("pre"),n=document.createTextNode(e);return t.appendChild(n),t.innerHTML?t.innerHTML.trim():void 0},Ne={props:["game"],name:"EventLog",computed:{events:function(){return this.game.events}},methods:{format:Ee.a,preload:Se(function(){return"‚ú®üí¨üëÅÔ∏èüí∞üëÄü§îüîÅüöÄüí™ü•≤ü•≥üôåüëëüëãüí¶üçÉüëûüë®‚Äç‚úàÔ∏èüåª‚ô£Ô∏è‚ù§Ô∏è‚ô¶Ô∏è‚ô†Ô∏è"}),formatServerEvent:Se(function(e){switch(e.action){case"NEW_ROUND":return"‚ú® A new round begins ‚ú®";case"TRICK_DONE":return"üëÄ"}}),formatPlayerEvent:Se(function(e){switch(e.action){case"CHAT_MESSAGE":var t=xe(e.message);return t?"üí¨ "+t:void 0;case"TRADED":var n=1===e.numCards?"card":"cards",s=0===e.numCards?"ü§î":"üîÅ";return"traded "+e.numCards+" "+n+" "+s;case"PLAYED":return"played "+Te(e.card);case"WON_TRICK":return"took the trick!";case"CALLED_CHICAGO":return"called Chicago! üöÄ";case"LOST_CHICAGO":if("HAND"===e.reason)return"lost 15 points due to <strong>"+xe(e.opponentName)+"'s</strong> hand ü•≤";if("TRICKS"===e.reason)return"lost 15 points due to <strong>"+xe(e.opponentName)+"</strong> move ü•≤";case"WON_CHICAGO":return"got 15 points for their Chicago! ü•≥";case"WON_ROUND":var a=5===e.points?"closing with a Two!":"winning!";return"got "+be(e)+" for "+a+" üôå";case"WON_BEST_HAND":var i=Ae(e.handType.replaceAll("_"," "));return"got "+be(e)+" for a "+i+" üí∞";case"WON_GAME":return"won the game! üëë üëë üëë";case"WON_ROUND_GUARANTEED":var r=e.cards.map(Te).join(", ");return 1===e.cards.length?"won the round with an unbeatable "+r+"! üí™":"made it rain üí¶ with "+r;case"CREATED_GAME":return"created the game üåª";case"BECAME_HOST":return"became the new game host üë®‚Äç‚úàÔ∏è";case"JOINED_GAME":return"joined the game üëã";case"LEFT_GAME":return e.kicked?"was kicked from the game üëû":"left the game üçÉ";case"REQUESTED_ONE_OPEN":return"is being offered "+Te(e.card);case"RESPONDED_TO_ONE_OPEN":return e.accepted?"accepted üëç":"declined üëé"}})}},we={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{always:!1,smooth:!0},expression:"{ always: false, smooth: true }"}],staticClass:"disable-scrollbars is-flex is-justify-content-flex-start is-flex-direction-column",staticStyle:{overflow:"scroll",width:"400px"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],domProps:{innerHTML:e._s(e.preload())}}),e._v(" "),e._l(e.events,function(t){return n("div",["server"===t.actor.id&&e.formatServerEvent(t)?n("div",{staticStyle:{"border-bottom":"1px solid #ccc",height:"15px","text-align":"center","margin-bottom":"15px"}},[n("span",{staticClass:"has-text-grey is-size-7",staticStyle:{height:"40px","background-color":"#f5f5f5",padding:"5px"},domProps:{innerHTML:e._s(e.formatServerEvent(t))}})]):e.formatPlayerEvent(t)?n("div",[n("span",{staticClass:"has-text-grey-light is-size-7",staticStyle:{"line-height":"30px"}},[e._v("\n        "+e._s(e.format(t.timestamp,"HH:mm"))+"\n      ")]),e._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{width:"30px"}}),e._v(" "),n("strong",[e._v(e._s(t.actor.name))]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.formatPlayerEvent(t))}})]):e._e(),e._v(" "),n("span",{ref:"rows",refInFor:!0})])})],2)},staticRenderFns:[]},Oe={name:"Chat",props:["game","connected"],data:function(){return{showRules:!0}},computed:{numTrades:function(){return this.game.rules.numTrades},chicagoBestHand:function(){return this.game.rules.chicagoBestHand},oneOpenFinal:function(){return"FINAL"===this.game.rules.oneOpen}},components:{ChatSender:me,EventLog:n("VU/8")(Ne,we,!1,function(e){n("DdD0")},"data-v-0265e819",null).exports,ConnectionStatus:P}},Re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"is-flex is-flex-direction-column is-justify-content-space-between",staticStyle:{"background-color":"#f5f5f5","border-radius":"20px",padding:"15px"}},[n("div",{staticClass:"is-flex is-flex-direction-column",staticStyle:{flex:"1",overflow:"hidden"}},[n("div",{staticClass:"is-flex is-justify-content-space-between"},[n("ConnectionStatus",{attrs:{connected:e.connected}}),e._v(" "),e.showRules?e._e():n("a",{staticClass:"button is-small is-rounded is-info is-light",on:{click:function(t){e.showRules=!0}}},[e._m(0),e._v(" "),n("span",[e._v("Show rules")])]),e._v(" "),n("a",{staticClass:"button is-small is-rounded is-danger is-light",on:{click:function(t){e.$emit("leave")}}},[e._m(1),e._v(" "),n("span",[e._v("Leave game")])])],1),e._v(" "),e.showRules?n("div",{staticClass:"is-flex",staticStyle:{width:"400px"}},[n("div",{staticClass:"notification is-info",staticStyle:{flex:"1"}},[n("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:function(t){e.showRules=!1}}}),e._v(" "),n("p",[n("strong",[e._v(e._s(e.numTrades))]),e._v(" trades")]),e._v(" "),n("p",[e._v("Chicago "),n("strong",[e._v(e._s(e.chicagoBestHand?"requires":"does not require"))]),e._v(" best hand")]),e._v(" "),n("p",[e._v("1 open card available at "),n("strong",[e._v(e._s(e.oneOpenFinal?"the final trade":"every trade"))])])])]):e._e(),e._v(" "),n("div",{staticStyle:{height:"15px"}}),e._v(" "),n("EventLog",{attrs:{game:e.game}})],1),e._v(" "),n("div",{staticStyle:{"padding-top":"15px"}},[n("ChatSender")],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fa fa-scale-balanced"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fa fa-right-from-bracket"})])}]},Ie=n("VU/8")(Oe,Re,!1,null,null,null).exports,Me=function(e){return function(t){return e.suit===t.suit&&e.value===t.value}},Pe={name:"Game",props:{connected:{type:Boolean,required:!0},game:{type:Object,required:!0},me:{type:Object,required:!0}},watch:{connected:function(e){e&&this.game.stale&&this.$emit("rejoin")}},components:{Controls:ee,Players:re,MyHand:le,Chat:Ie,Player:se},data:function(){return{markedCards:[]}},methods:{leave:function(){this.$emit("leave"),setTimeout(function(){window.location.href="/"},0)},toggleMark:function(e){this.isPhase(j)?this.unmarkAll():this.isPhase(F)?this.markSingle(e):this.isMarked(e)?this.unmark(e):this.mark(e)},unmark:function(e){this.markedCards=this.markedCards.filter(function(e){return function(t){return!Me(e)(t)}}(e))},unmarkAll:function(){this.markedCards=[]},mark:function(e){this.isMarked(e)||this.markedCards.push(e)},markSingle:function(e){this.markedCards=[e]},isMarked:function(e){return this.markedCards.some(Me(e))},isPhase:function(e){return this.game.round.phase===e}},computed:{baseMove:function(){if(this.currentTrick)return this.currentTrick.moves&&this.currentTrick.moves.length>0&&this.currentTrick.moves[0]},currentTrick:function(){var e=this.game.round,t=e&&e.tricks;if(t)return t.length>0&&t[t.length-1]},currentPlayer:function(){return this.game.round&&this.game.round.currentPlayer},dealer:function(){return this.game.dealer},controlPlayer:function(){var e=this;return this.game.players.find(function(t){return t.id===e.me.id})},otherPlayers:function(){for(var e=this,t=[].concat(H()(this.game.players)),n=t.findIndex(function(t){return t.id===e.me.id}),s=0;s<n;s++)t.push(t.shift());return t.slice(1)}}},Ge={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"section pb-0 pt-0 is-flex is-flex-direction-column"},[t("div",{staticClass:"is-flex is-flex-direction-row",staticStyle:{flex:"1"}},[t("div",{staticClass:"is-flex is-flex-direction-column is-justify-content-space-between",staticStyle:{height:"100vh"}},[t("div",{staticClass:"is-flex",staticStyle:{flex:"1",overflow:"hidden","padding-top":"30px","padding-bottom":"30px"}},[t("Chat",{attrs:{game:this.game,connected:this.connected},on:{leave:this.leave}})],1)]),this._v(" "),t("div",{staticStyle:{width:"30px"}}),this._v(" "),t("div",{staticClass:"container is-flex is-flex-direction-column"},[t("div",{staticStyle:{"padding-top":"30px"}},[t("div",{staticClass:"is-flex is-flex-direction-row is-justify-content-space-between"},[t("Player",{attrs:{isMe:!0,variant:"large",fallbackName:"You",player:this.controlPlayer,baseMove:this.baseMove,currentPlayer:this.currentPlayer,dealer:this.dealer}}),this._v(" "),t("Controls",{attrs:{game:this.game,me:this.me,controlPlayer:this.controlPlayer,currentPlayer:this.currentPlayer,dealer:this.dealer,baseMove:this.baseMove,markedCards:this.markedCards},on:{action:this.unmarkAll}})],1),this._v(" "),this.otherPlayers?t("Players",{attrs:{players:this.otherPlayers,baseMove:this.baseMove,currentPlayer:this.currentPlayer,dealer:this.dealer}}):this._e()],1),this._v(" "),t("div",{staticClass:"is-flex is-justify-content-flex-end",staticStyle:{flex:"1"}},[this.game.started?t("MyHand",{attrs:{me:this.me,markedCards:this.markedCards,phase:this.game.round.phase,game:this.game},on:{toggleMark:this.toggleMark,action:this.unmarkAll}}):this._e()],1)])])])},staticRenderFns:[]},De=function e(t,n){T()(this,e),this.playerId=t,this.key=n},Ke="SET_NICKNAME_ERROR",Le="SET_INVKEY_ERROR",He={components:{Start:K,Game:n("VU/8")(Pe,Ge,!1,function(e){n("U49S")},null,null).exports,ConnectionStatus:P},name:"Wrapper",computed:Object(p.b)({game:"game",me:"me",errors:"errors",socket:"socket"}),watch:{"socket.status":function(e){var t=this;"failed"===e&&setTimeout(function(){return t.connect()},1e3)}},methods:{dispatchAction:function(e){this.$store.dispatch(S,e)},clearKeyError:function(){this.$store.commit(Le,"")},clearNickError:function(){this.$store.commit(Ke,"")},connect:function(){this.socket.connected||this.$store.dispatch("CONNECT")},rejoin:function(){var e=this.game.invKey||localStorage.getItem("invitationKey"),t=this.me.id||localStorage.getItem("playerId");if(!e||!t)return alert("Sorry! Something went wrong... You won't be able to rejoin the game"),void this.leave();var n=new N(t,e),s=new R("RECONNECT",n);this.dispatchAction(s)},leave:function(){var e=this.game.invKey||localStorage.getItem("invitationKey"),t=this.me.id||localStorage.getItem("playerId");if(e&&t){var n=new De(t,e),s=new R("LEAVE_GAME",n);this.dispatchAction(s)}localStorage.removeItem("invitationKey"),localStorage.removeItem("playerId")}},created:function(){this.connect()}},Ue={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.game.invKey?t("Game",{attrs:{connected:this.socket.connected,me:this.me,game:this.game},on:{rejoin:this.rejoin,leave:this.leave}}):t("Start",{attrs:{connected:this.socket.connected,errors:this.errors,urlKey:this.$route.params.key,currentlyInGame:this.game.currentlyInGame},on:{action:this.dispatchAction,changeKey:this.clearKeyError,changeNick:this.clearNickError,rejoin:this.rejoin,leave:this.leave}})],1)},staticRenderFns:[]},$e=n("VU/8")(He,Ue,!1,function(e){n("VT0U")},"data-v-a10568c8",null).exports;r.a.use(_.a);var je,Fe,Ye,Be,Ve,We,Je,qe=[{path:"/:key?",component:$e}],Qe=new _.a({base:"/",routes:qe,mode:"hash"}),ze={state:{currentlyInGame:void 0,stale:!1,rules:{chicagoBestHand:!1,oneOpen:"ALL",numTrades:2},oneOpen:{player:{id:""},isOpen:!1,card:{suit:"",value:""}},host:{id:""},dealer:{id:""},invKey:"",players:[],events:[],started:!1,hasWinners:!1,round:{currentPlayer:"",phase:"",tricks:[],isFinalTrade:!1}},mutations:(je={},h()(je,f,function(e,t){e.currentlyInGame=t}),h()(je,"SET_STALE",function(e,t){e.stale=t}),h()(je,"MIRROR_GAME_STATE",function(e,t){e.currentlyInGame=!0,e.stale=!1,e.host.id=t.host.id,e.dealer=t.dealer,e.invKey=t.invitationKey,e.players=t.players,e.events=t.events,e.started=t.started,e.hasWinners=t.hasWinners,e.rules.chicagoBestHand=t.rules.chicagoBestHand,e.rules.oneOpen=t.rules.oneOpen,e.rules.numTrades=t.rules.numTrades,t.currentRound&&(e.round.currentPlayer=t.currentRound.currentPlayer,e.round.phase=t.currentRound.phase,e.round.tricks=t.currentRound.tricks,e.round.isFinalTrade=t.currentRound.isFinalTrade,e.oneOpen.player=t.oneOpen.player,e.oneOpen.card=t.oneOpen.card,e.oneOpen.isOpen=t.oneOpen.isOpen)}),je),actions:(Fe={},h()(Fe,g,function(e,t){(0,e.commit)(f,JSON.parse(t))}),h()(Fe,"DISCONNECTED",function(e){(0,e.commit)("SET_STALE",!0)}),h()(Fe,"HANDLE_SNAPSHOT",function(e,t){var n=e.commit,s=JSON.parse(t);localStorage.setItem("invitationKey",s.game.invitationKey),localStorage.setItem("playerId",s.me.id),Qe.push(s.game.invitationKey),n("SET_MY_TURN",s.myTurn),n("SET_IM_DEALING",s.imDealing),n("SET_MY_HAND",s.myHand),n("SET_MY_PLAYER",s.me),n("MIRROR_GAME_STATE",s.game)}),Fe)},Xe={state:{nickname:"",invKey:""},mutations:(Ye={},h()(Ye,Ke,function(e,t){e.nickname=t}),h()(Ye,Le,function(e,t){e.invKey=t}),Ye),actions:(Be={},h()(Be,"HANDLE_GAME_ERROR",function(e,t){e.state;window.alert(t)}),h()(Be,"HANDLE_JSON_ERROR",function(e,t){e.state;window.alert("Something went wrong! Please try again")}),h()(Be,"HANDLE_FATAL_ERROR",function(e,t){e.state;window.alert(t),localStorage.removeItem("invitationKey"),localStorage.removeItem("playerId"),window.location.href="/"}),Be)},Ze="SET_STATUS_CONNECTED",et="SET_STATUS_CONNECTING",tt=function e(t){T()(this,e);var n=JSON.parse(t.data),s=n.type,a=n.body;this.type=s,this.body=a},nt={connected:!1,status:"connecting",socket:void 0},st=(Ve={},h()(Ve,Ze,function(e){e.status="connected",e.connected=!0}),h()(Ve,"SET_STATUS_FAILED",function(e){e.status="failed",e.connected=!1}),h()(Ve,et,function(e){e.status="connecting",e.connected=!1}),h()(Ve,"SET_SOCKET",function(e,t){e.socket=t}),Ve),at=(We={},h()(We,"CONNECT",function(e){var t=e.commit,n=e.dispatch;nt.socket&&nt.socket.close(),t(et);var s=new WebSocket("wss://chicago-server.herokuapp.com/game"),a=void 0;s.onopen=function(){var e=k()(new R("PING","pong"));a=setInterval(function(){return s.send(e)},1e4),t(Ze)};var i=function(){clearInterval(a),t("SET_STATUS_FAILED"),n("DISCONNECTED")};s.onclose=i,s.onerror=i,s.onmessage=function(e){n("HANDLE_MESSAGE",e)},t("SET_SOCKET",s)}),h()(We,"HANDLE_MESSAGE",function(e,t){var n=e.commit,s=e.dispatch,a=new tt(t);switch(a.type){case"CURRENTLY_IN_GAME":s(g,a.body);break;case"KICKED":localStorage.removeItem("invitationKey"),localStorage.removeItem("playerId"),alert("You were kicked from the game"),window.location.href="/";break;case"KEY_ERROR":n(Le,a.body);break;case"NICKNAME_ERROR":n(Ke,a.body);break;case"GAME_ERROR":s("HANDLE_GAME_ERROR",a.body);break;case"JSON_ERROR":s("HANDLE_JSON_ERROR",a.body);break;case"FATAL_ERROR":s("HANDLE_FATAL_ERROR",a.body);break;case"SNAPSHOT":s("HANDLE_SNAPSHOT",a.body)}}),h()(We,S,function(e,t){e.state.socket.send(k()(t))}),We),it={state:nt,actions:at,mutations:st};r.a.use(p.a);var rt=new p.a.Store({modules:(Je={},h()(Je,"me",v),h()(Je,"game",ze),h()(Je,"errors",Xe),h()(Je,"socket",it),Je)}),ot=n("bNL2"),ct=n.n(ot);r.a.use(ct.a),r.a.config.productionTip=!1,r.a.mixin(Ce),new r.a({store:rt,router:Qe,el:"#app",render:function(e){return e(d)}}).$mount("#app")},U49S:function(e,t){},UUE2:function(e,t){},VT0U:function(e,t){},VvPY:function(e,t){},mm1o:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c65ac2843ef2fd26b43a.js.map